var PlanetCryptoContract,PlanetCryptoContractPlay,PlanetCryptoCoinContract,PlanetCryptoCoinContractPlay,logsSubscription,canPlay=!1,minBet=.001,maxBet=.002,account=0,playing=!1,useGasPrice=1e10,ethGasStationAPI="https://ethgasstation.info/json/ethgasAPI.json",contractAddress="0x8C55B18e6bb7083b29102e57c34d0C3124c0a952",coinsContractAddress="0xA1c8031EF18272d8BfeD22E1b61319D6d9d2881B",useTestnet=!1,isMainGame=!0,isDetail=!1,eth_to_usd=194.683,PLOT_SIZE=20,CURRENT_RESALE_MULTIPLIER=2,CURRENT_EMPIRE_MULTIPLIER=1.5,PERCENT_SPEED=200,GAME_UPDATE_SPEED=1e4,MB_TOKEN="";L.MakiMarkers.accessToken=MB_TOKEN;var grid18,grid17,grid16,grid15,grid14,grid13,grid12,grid11,grid10,grid9,grid8,grid7,grid6,grid5,grid4,grid3,grid2,grid1,grid0,mymap,_findTokenId,layer,layerLabels,allowedPlotsCircle,currentlySelectedMarker,web3Connection,gameConnection,MIN_BUY_LVL=17,MAX_BUY_RADIUS=200,currentLandPrice=new BigNumber(2e16),currentEmpirePerPlot=100,displayGameID=1,maxGames=2,_referer="0x0000000000000000000000000000000000000000",rects={},lightGrids={},gridIinit=!1,grid17Iinit=!1,grid16Iinit=!1,grid15Iinit=!1,grid14Iinit=!1,grid13Iinit=!1,grid12Iinit=!1,grid11Iinit=!1,grid10Iinit=!1,grid9Iinit=!1,grid8Iinit=!1,grid7Iinit=!1,grid6Iinit=!1,grid5Iinit=!1,grid4Iinit=!1,grid3Iinit=!1,grid2Iinit=!1,grid1Iinit=!1,grid0Iinit=!1,onDownEvent=!1,inSubtractionMode=!1,rectsToBuy={},actionMode="",currentlySelectedMarkerRemoved=!1,blankCardIcon=L.icon({iconUrl:"images/blank-card.png",iconSize:[37,50],iconAnchor:[37,50],shadowUrl:"images/card-shadow.png",shadowSize:[38,52],shadowAnchor:[34,47]}),isConnected=!1,minPlayAmount=new BigNumber(0),userWalletAddress="0x00",userWalletAddressShort="0x00",userWalletBalance=0,TOAST_HIDE_DELAY=1e4,TOAST_HIDE_TRANSITION="slide",gameConnectionConnected=!1,statsConnectionConnected=!1,currentPlayers=0,currentUserLand=0,currentUserEmpireScore=0,tokens={},plots={},CONNECTION_TO_USE="wss://mainnet.infura.io/ws";function viewContract(){var e=window.open("https://etherscan.io/address/"+contractAddress,"_blank");e&&e.focus()}var share_url="https://planetcrypto.app",share_title="Planet Crypto ~ Own the World!",share_description="Im playing the biggest Crypto Game - Plant Crypto...";function shareExistingCard(){window.open("https://www.addthis.com/bookmark.php?url="+escape(share_url)+"&pub_id=ra-5bed6d6fe2749d93&description="+escape(share_description),"_blank")}var isMobile=!1;window.addEventListener("load",function(){$(document).foundation(),setupMap(),googleTranslateElementInit(),window.matchMedia("only screen and (max-width: 760px)").matches&&(isMobile=!0),$.getJSON(ethGasStationAPI,function(e){if(isNaN(e.average))console.log("Unable to access ethgasstation");else{var t=new BigNumber(e.average).times(1e8);console.log("New Gas:",t.toString()),useGasPrice=parseInt(t.toString())}console.log("Average",e.average)});var e=getUrlParameter("ref")||"";if(e.length>0)_referer=e;else{var t=""|Cookies.get("ref");t.length>0&&(_referer=t)}Cookies.set("ref",_referer,{expires:30}),_findTokenId=getUrlParameter("token_id")||"",$("#jumpToLocation").change(function(e){$("#welcomeDiv").foundation("close"),processJumpToLocationEvent(this)}),$("#jumpToLocation2").change(function(e){$("#guideDiv").foundation("close"),processJumpToLocationEvent(this)}),$("#buywthETH").click(function(){buyWithEth()}),$("#buywthTokens").click(function(){buyWithTokens()}),$("#withdrawButton").click(function(){withdrawFunds()}),$("#withdrawButton2").click(function(){withdrawFunds()}),$("#shareExistingCard").click(function(){shareExistingCard()}),$("#existingCardURLLink").click(function(){window.open("https://"+document.getElementById("existingCardsURL").innerHTML,"_blank")}),$("#ownedCardsBtn").click(function(){$("#userLostCards2").removeClass("hide").addClass("hide"),$("#userCards2").removeClass("hide")}),$("#previousCardsBtn").click(function(){$("#userCards2").removeClass("hide").addClass("hide"),$("#userLostCards2").removeClass("hide")}),$("#cancelBuy").click(function(){$("#clearBuyConfirm").foundation("open")}),$("#getStartedButton").click(function(){$("#welcomeDiv").foundation("close")}),$("#readMoreButton").click(function(){showGuide()}),$("#cryptoGuideBtn").click(function(){showGuide()}),$("#cryptoGuideBtnMobile").click(function(){showGuide()}),$("#buyMultiple").click(function(){startBuyMultiple()}),$("#buySingle").click(function(){startBuySingle()}),$("#removeSingle").click(function(){startRemoveSingle()}),$("#removeAll").click(function(){$("#clearBuyConfirm").foundation("open")}),$("#buySingleMobile").click(function(){startBuySingle()}),$("#removeSingleMobile").click(function(){startRemoveSingle()}),$("#removeAllMobile").click(function(){$("#clearBuyConfirm").foundation("open")}),$("#padlockLink").click(function(){switchCOINlockstatus()}),$("#padlockLinkMobile").click(function(){switchCOINlockstatus()}),$("#clearBuyButtonConfirm").click(function(){startRemoveAll()}),$("#newCardStartPointLink").click(function(){gotoStartPointLink()}),$("#existingCardStartPointLink").click(function(){gotoExistingCardStartPoint()}),$("#existingCardOwner").click(function(){window.open("https://etherscan.io/address/"+document.getElementById("existingCardOwner").value,"_blank")}),$("#buyExistingWthETH").click(function(){buyExistingCard()}),$("#newCardStartOwner").click(function(){window.open("https://etherscan.io/address/"+document.getElementById("newCardOwnerAddr").value,"_blank")}),$("#closeExistingCard").click(function(){$("#existingCardDiv").foundation("close")});var r;new Foundation.Tabs($("#bottomCardsTabs"));$("#bottomCardsTabs").on("change.zf.tabs",function(e){$("#panel1:visible").length&&($("#tab1").addClass("tabs-title1-selected").removeClass("tabs-title1"),$("#tab2").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected"),$("#tab3").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected"),$("#tab4").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected"),$("#tab5").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected")),$("#panel2:visible").length&&($("#tab1").addClass("tabs-title1").removeClass("tabs-title1-selected"),$("#tab2").addClass("tabs-title-standard-selected").removeClass("tabs-title-standard"),$("#tab3").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected"),$("#tab4").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected"),$("#tab5").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected")),$("#panel3:visible").length&&($("#tab1").addClass("tabs-title1").removeClass("tabs-title1-selected"),$("#tab2").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected"),$("#tab3").addClass("tabs-title-standard-selected").removeClass("tabs-title-standard"),$("#tab4").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected"),$("#tab5").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected")),$("#panel4:visible").length&&($("#tab1").addClass("tabs-title1").removeClass("tabs-title1-selected"),$("#tab2").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected"),$("#tab3").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected"),$("#tab4").addClass("tabs-title-standard-selected").removeClass("tabs-title-standard"),$("#tab5").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected")),$("#panel5:visible").length&&($("#tab1").addClass("tabs-title1").removeClass("tabs-title1-selected"),$("#tab2").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected"),$("#tab3").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected"),$("#tab4").addClass("tabs-title-standard").removeClass("tabs-title-standard-selected"),$("#tab5").addClass("tabs-title-standard-selected").removeClass("tabs-title-standard"))}),setTimeout(function(){$("#welcomeDiv").foundation("open")},500);if(window.ethereum){gameConnection=new Web3(ethereum);try{!async function(){try{result=await ethereum.enable(),gameConnectionConnected=!0;try{PlanetCryptoContractPlay=new gameConnection.eth.Contract(planetCryptoABI,contractAddress)}catch(e){}try{PlanetCryptoCoinContractPlay=new gameConnection.eth.Contract(planetCryptoCoinABI,coinsContractAddress)}catch(e){}checkNetwork()}catch(e){console.log("Error getting permission",e),gameConnectionConnected=!1,startApp()}}()}catch(e){showError("To play PlanetCrypto.app you need to enable permission for our domain (planetcrypto.app) for your Ethereum Wallet","Planet Crypto"),startApp()}}else if(window.web3){gameConnection=new Web3(web3.currentProvider),gameConnectionConnected=!0;try{PlanetCryptoContractPlay=new gameConnection.eth.Contract(planetCryptoABI,contractAddress)}catch(e){}try{PlanetCryptoCoinContractPlay=new gameConnection.eth.Contract(planetCryptoCoinABI,coinsContractAddress)}catch(e){}checkNetwork()}else console.log("Non-Ethereum browser detected. You should consider trying MetaMask!");setNewCardBg(),r=new Web3.providers.WebsocketProvider(CONNECTION_TO_USE),console.log("provider:",r),console.log("GAME CONNECTION:",gameConnection),r.on("error",function(e){console.error("WS Error",e),reconnectProvider(0)}),r.on("end",function(e){console.error("WS End",e),console.log("WS closed"),console.log("Attempting to reconnect..."),reconnectProvider(0)}),web3Connection=new Web3(r),console.log("Starting main listeners"),gameConnection?console.log("HAVE GAME CONNECTION"):(console.log("NO GAME CONNECTION"),setTimeout(function(){startApp()},7500));web3Connection.eth.subscribe("newBlockHeaders",function(e,t){if(e)return console.error(e);statsConnectionConnected=!0}).on("data",function(e){}).on("error",function(e){})});var fireGameDataReadyCounter=0;function processLogResult(e,t,r,a){var n=!0;if(1==t&&(n=!1),"landPurchased"==e.event)if(1==t)1==r?populateTokens(e.returnValues.token_id,!0,a):0==fireGameDataReadyCounter?(populateTokens(e.returnValues.token_id,!0,a),fireGameDataReadyCounter=10):(populateTokens(e.returnValues.token_id,!1,a),fireGameDataReadyCounter--),updateInnerHTML("totalCards",++totalCards),updateInnerHTML("totalCardsMobile",totalCards),totalCards>100&&updateInnerHTML("startCards",totalCards);else{setTimeout(function(){populateTokens(e.returnValues.token_id,!0,a)},15e3);var o="By: "+e.returnValues.buyer.substring(0,10)+"...<br/>";if(o+="For: "+web3Connection.utils.fromWei(e.returnValues.bought_at.toString(),"ether").substring(0,8)+" ETH<br/>",o+="Size: "+parseInt(e.returnValues.size)*PLOT_SIZE+"m<sup>2</sup><br/>",o+="Empire Score: +"+e.returnValues.empire_score,$.toast({heading:"New Card Purchased!",text:o,icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION}),totalLandSize+=parseInt(e.returnValues.size)*PLOT_SIZE,updateTotalLandSize(),updateInnerHTML("totalCards",++totalCards),updateInnerHTML("totalCardsMobile",totalCards),totalCards>100&&updateInnerHTML("startCards",totalCards),e.returnValues.buyer.toUpperCase()==userWalletAddress.toUpperCase()){var s=currentUserLand+=parseInt(e.returnValues.size)*PLOT_SIZE,i="m";s>99999&&(s/=1e3,i="km"),updateInnerHTML("yourLandSize",s+i),updateInnerHTML("yourLandSizeMobile",s+i),updateInnerHTML("yourEmpireScore",currentUserEmpireScore+=parseInt(e.returnValues.empire_score)),updateInnerHTML("yourEmpireScoreMobile",currentUserEmpireScore)}}if(n){if("taxDistributed"==e.event&&parseInt(e.returnValues.amnt)>0){o="Amount: "+web3Connection.utils.fromWei(e.returnValues.amnt.toString(),"ether").substring(0,8)+" ETH<br/>";o+="To: "+e.returnValues.total_players+" Players",$.toast({heading:"Land Tax Distributed!",text:o,icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION})}if("referralPaid"==e.event){o=e.returnValues.to.substring(0,10)+"...<br/>";o+="has just earned a referral bonus of:<br/>",o+=web3Connection.utils.fromWei(e.returnValues.amnt.toString(),"ether").substring(0,8)+" ETH<br/>",o+="Check the Guide for info on how you can earn ETH!",$.toast({heading:"Referral Bonus Earned!",text:o,icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION})}if("issueCoinTokens"==e.event){o=e.returnValues.to.substring(0,10)+"...<br/>";o+="has just earned a PlanetCOINs:<br/>",o+=e.returnValues.amnt.toString()+" PlanetCOINS<br/>",o+="Check the Guide for info on how you can earn PlanetCOINS!",$.toast({heading:"PlanetCOINs Earned!",text:o,icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION})}}if("cardBought"==e.event){if(tokens[e.returnValues.token_id].buy_history.push({token_owner:e.returnValues.to,from:e.returnValues.from,bought_at:e.returnValues.new_value,orig_value:e.returnValues.orig_value,ts:e.returnValues.now}),t);else{var l;try{l=web3Connection.utils.utf8ToHex(e.returnValues.name)}catch(t){l=web3Connection.utils.fromAscii(e.returnValues.name)}o="Name: "+l+"<br/>";o+="By: "+e.returnValues.to.substring(0,10)+"...<br/>",o+="From: "+e.returnValues.from.substring(0,10)+"...<br/>",o+="For: "+web3Connection.utils.fromWei(e.returnValues.new_value.toString(),"ether").substring(0,8)+" ETH<br/>",o+="Empire Score: +"+e.returnValues.newEmpireScore,e.returnValues.from.toUpperCase()==userWalletAddress.toUpperCase()?$.toast({heading:"One of your cards has been taken over!",text:o,icon:"error",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION}):$.toast({heading:"Card Hostile Take Over!",text:o,icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION}),updateInnerHTML("totalTrades",++totalTrades),updateInnerHTML("totalTradesMobile",totalTrades),e.returnValues.to.toUpperCase()==userWalletAddress.toUpperCase()&&PlanetCryptoContract.methods.getToken(e.returnValues.token_id,!1).call(function(t,r){if(!t){var a=currentUserLand+=parseInt(r.plots_lat.length)*PLOT_SIZE,n="m";a>99999&&(a/=1e3,n="km"),updateInnerHTML("yourLandSize",a+n),updateInnerHTML("yourLandSizeMobile",a+n),updateInnerHTML("yourEmpireScore",currentUserEmpireScore+=parseInt(e.returnValues.newEmpireScore)),updateInnerHTML("yourEmpireScoreMobile",currentUserEmpireScore)}}),e.returnValues.from.toUpperCase()==userWalletAddress.toUpperCase()&&($("#userCardFull"+e.returnValues.token_id).remove(),PlanetCryptoContract.methods.getToken(e.returnValues.token_id,!1).call(function(t,r){if(!t){var a=currentUserLand-=parseInt(r.plots_lat.length)*PLOT_SIZE,n="m";a>99999&&(a/=1e3,n="km"),updateInnerHTML("yourLandSize",a+n),updateInnerHTML("yourLandSizeMobile",a+n),updateInnerHTML("yourEmpireScore",currentUserEmpireScore-=parseInt(e.returnValues.empireScore)),updateInnerHTML("yourEmpireScoreMobile",currentUserEmpireScore)}}))}a&&a()}1==t||processOtherStats()}function processOtherStats(){PlanetCryptoContract.methods.getAllPlayerObjectLen().call(function(e,t){e||(updateInnerHTML("totalPlayers",(currentPlayers=parseInt(t))-1),updateInnerHTML("totalPlayersMobile",currentPlayers-1))}),updateCurrentLandPrice(),PlanetCryptoContract.methods.tax_fund().call(function(e,t){e||(tax_fund=new BigNumber(t),updateInnerHTML("taxFund",web3Connection.utils.fromWei(tax_fund.toString(),"ether").substring(0,8)),updateInnerHTML("taxFundMobile",web3Connection.utils.fromWei(tax_fund.toString(),"ether").substring(0,8)))}),PlanetCryptoContract.methods.tax_distributed().call(function(e,t){e||(tax_distributed=new BigNumber(t),updateInnerHTML("taxDist",web3Connection.utils.fromWei(tax_distributed.toString(),"ether").substring(0,8)),updateInnerHTML("taxDistMobile",web3Connection.utils.fromWei(tax_distributed.toString(),"ether").substring(0,8)))}),canPlay&&(PlanetCryptoCoinContract.methods.balanceOf(userWalletAddress).call(function(e,t){e||(updateInnerHTML("yourCOINS",yourCOINS=parseInt(t)),updateInnerHTML("yourCOINSMobile",yourCOINS),PlanetCryptoCoinContract.methods.allowance(userWalletAddress,contractAddress).call(function(e,t){e||(parseInt(t)<yourCOINS?(currentPadlockstateLocked=!0,$("#padlock").attr("src","images/padlock.png"),$("#padlockMobile").attr("src","images/padlock.png")):(currentPadlockstateLocked=!1,$("#padlock").attr("src","images/padlock_open.png"),$("#padlockMobile").attr("src","images/padlock_open.png")))}))}),PlanetCryptoContractPlay.methods.taxEarningsAvailable().call({from:userWalletAddress},function(e,t){e||(tax_available=new BigNumber(t),updateInnerHTML("yourTaxAvailable",web3Connection.utils.fromWei(tax_available.toString(),"ether").substring(0,8)),updateInnerHTML("yourTaxAvailableMobile",web3Connection.utils.fromWei(tax_available.toString(),"ether").substring(0,8)))}))}function setNewCardBg(){userWalletAddress.length>5&&($("#newCardHeader").css("background-color","#"+userWalletAddress.substring(userWalletAddress.length-6)),document.getElementById("newCardOwnerAddr").value=userWalletAddress,updateInnerHTML("newCardOwnerAddr",userWalletAddressShort))}function reconnectProvider(e){try{provider=new Web3.providers.WebsocketProvider(CONNECTION_TO_USE),provider.on("connect",function(){console.log("WSS Reconnected")}),web3Connection.setProvider(provider),restartApp()}catch(t){++e<60&&setTimeout(function(){reconnectProvider(e)},2e3)}}function startApp(){isMainGame&&(PlanetCryptoContract=new web3Connection.eth.Contract(planetCryptoABI,contractAddress),PlanetCryptoCoinContract=new web3Connection.eth.Contract(planetCryptoCoinABI,coinsContractAddress),setupLogSubscription(),processOtherStats(),setupGameStats(!0),populateGameStats())}function restartApp(){if(isMainGame){if(gameConnectionConnected){try{PlanetCryptoContractPlay=new gameConnection.eth.Contract(planetCryptoABI,contractAddress)}catch(e){}checkNetwork()}console.log("Contract reset"),PlanetCryptoContract=new web3Connection.eth.Contract(planetCryptoABI,contractAddress),PlanetCryptoCoinContract=new web3Connection.eth.Contract(planetCryptoCoinABI,coinsContractAddress),setupLogSubscription(),processOtherStats(),setupGameStats(!1)}}function setupLogSubscription(){PlanetCryptoContract.getPastEvents("landPurchased",{fromBlock:6714797},function(e,t){}).then(function(e){for(var t=0,r=e.length-1;r>-1;r--)if("landPurchased"==e[r].event){t=r;break}for(r=0;r<e.length;r++)r==t?processLogResult(e[r],!0,!0,processInitBoughtCards):processLogResult(e[r],!0,!1)}),logsSubscription=PlanetCryptoContract.events.allEvents({fromBlock:"latest"},function(e,t){}).on("data",function(e){processLogResult(e,!1,!1)}).on("error",function(e){console.log("logError",e)})}function processInitBoughtCards(){PlanetCryptoContract.getPastEvents("cardBought",{fromBlock:6714797},function(e,t){}).then(function(e){for(var t=0,r=e.length-1;r>-1;r--)if("cardBought"==e[r].event){t=r;break}for(r=0;r<e.length;r++)r==t?processLogResult(e[r],!0,!0,updatePreviousCards):processLogResult(e[r],!0,!1)})}var lastBlock=0,shownInitialWarning=!1;function checkNetwork(e){console.log("checkNetwork",gameConnection);try{gameConnection.eth.net.getNetworkType(function(e,t){var r="",a="main";1==useTestnet&&(a="ropsten"),(r=e?"Error:"+e:t>1e12?"testrpc":t)==a?(console.log("GETTING WALLET ADDR"),getUserWalletAddress()):(console.log("NOT CONNECTED"+a+":"+r),shownInitialWarning||(canPlay=!1,startApp()))})}catch(e){console.log("NOT CONNECTED"+e),shownInitialWarning||($("#notConnectedModel").foundation("open"),shownInitialWarning=!0)}}function getUserWalletAddress(){try{gameConnection.eth.getCoinbase(function(e,t){if(e)canPlay=!1,startApp();else{var r="";(r=t)?(userWalletAddress=r,console.log("userWalletAddress:",userWalletAddress),r&&(userWalletAddressShort=r.substring(0,10)+"..."),canPlay=!0,setNewCardBg(),startApp(),initUserStats()):(console.log("NOT LOGGED IN!"),userWalletAddressShort="",userWalletAddress="",startApp())}})}catch(e){console.log(e),canPlay=!1,startApp()}}function setupGameStats(e){initStats(),populateMapData()}function populateGameStats(){}var mapData={tokens:{},plots:{}};tokens={};function populateMapData(){}function populateTokens(e,t,r){PlanetCryptoContract.methods.getToken(e,!1).call(function(a,n){if(!a){try{tokens[e]={token_owner:n.token_owner,current_value:n.current_value,empire_score:n.empire_score,name:web3Connection.utils.hexToUtf8(n.name),orig_value:n.orig_value,card_size:n.plots_lat.length,plots_lat:n.plots_lat,plots_lng:n.plots_lng,buy_history:[]}}catch(t){tokens[e]={token_owner:n.token_owner,current_value:n.current_value,empire_score:n.empire_score,name:web3Connection.utils.toAscii(n.name),orig_value:n.orig_value,card_size:n.plots_lat.length,plots_lat:n.plots_lat,plots_lng:n.plots_lng,buy_history:[]}}t&&startFireGameDataReady(),r&&r()}})}function startFireGameDataReady(){mymap?mymap.fire("gameDataReady"):setTimeout(function(){startFireGameDataReady()},5e3)}var players=[],playersSortedByEmpireScore=players.sort(function(e,t){return parseFloat(t.totalEmpireScore)-parseFloat(e.totalEmpireScore)}),playersSortedByTotalLand=players.sort(function(e,t){return parseFloat(t.totalLand)-parseFloat(e.totalLand)}),totalLandSize=0,totalTrades=0,tax_fund=new BigNumber(0),tax_distributed=new BigNumber(0),tax_available=new BigNumber(0),totalCards=0,yourCOINS=0;currentLandPrice=new BigNumber(0);function initStats(){updateCurrentLandPrice(),PlanetCryptoContract.methods.getAllPlayerObjectLen().call(function(e,t){if(e);else{updateInnerHTML("totalPlayers",(currentPlayers=parseInt(t))-1),updateInnerHTML("totalPlayersMobile",currentPlayers-1);for(var r=!1,a=1;a<currentPlayers;a++)PlanetCryptoContract.methods.all_playerObjects(a).call(function(e,t){if(e);else if(players.push({lastAccess:t.lastAccess,playerAddress:t.playerAddress,totalEmpireScore:t.totalEmpireScore,totalLand:t.totalLand}),totalLandSize+=parseInt(t.totalLand)*PLOT_SIZE,updateTotalLandSize(),canPlay)try{if(t.playerAddress.toUpperCase()==userWalletAddress.toUpperCase()){console.log(userWalletAddress),r=!0;var a=currentUserLand+=parseInt(t.totalLand)*PLOT_SIZE,n="m";a>99999&&(a/=1e3,n="km"),updateInnerHTML("yourLandSize",a+n),updateInnerHTML("yourLandSizeMobile",a+n),currentUserEmpireScore+=parseInt(t.totalEmpireScore),updateInnerHTML("yourEmpireScore",t.totalEmpireScore),updateInnerHTML("yourEmpireScoreMobile",t.totalEmpireScore)}}catch(e){}});r||(updateInnerHTML("yourLandSize","0m"),updateInnerHTML("yourLandSizeMobile","0m"),updateInnerHTML("yourEmpireScore","0"),updateInnerHTML("yourEmpireScoreMobile","0")),updateTotalLandSize(),$("#loadingDiv").addClass("hide")}}),PlanetCryptoContract.methods.total_trades().call(function(e,t){e||(updateInnerHTML("totalTrades",totalTrades=parseInt(t)),updateInnerHTML("totalTradesMobile",totalTrades))}),PlanetCryptoContract.methods.tax_fund().call(function(e,t){e||(tax_fund=new BigNumber(t),updateInnerHTML("taxFund",web3Connection.utils.fromWei(tax_fund.toString(),"ether").substring(0,8)),updateInnerHTML("taxFundMobile",web3Connection.utils.fromWei(tax_fund.toString(),"ether").substring(0,8)))}),PlanetCryptoContract.methods.tax_distributed().call(function(e,t){e||(tax_distributed=new BigNumber(t),updateInnerHTML("taxDist",web3Connection.utils.fromWei(tax_distributed.toString(),"ether").substring(0,8)),updateInnerHTML("taxDistMobile",web3Connection.utils.fromWei(tax_distributed.toString(),"ether").substring(0,8)))})}function initUserStats(){canPlay&&(PlanetCryptoCoinContract.methods.balanceOf(userWalletAddress).call(function(e,t){e||(updateInnerHTML("yourCOINS",yourCOINS=parseInt(t)),updateInnerHTML("yourCOINSMobile",yourCOINS),PlanetCryptoCoinContract.methods.allowance(userWalletAddress,contractAddress).call(function(e,t){e||(parseInt(t)<yourCOINS?(currentPadlockstateLocked=!0,$("#padlock").attr("src","images/padlock.png"),$("#padlockMobile").attr("src","images/padlock.png")):(currentPadlockstateLocked=!1,$("#padlock").attr("src","images/padlock_open.png"),$("#padlockMobile").attr("src","images/padlock_open.png")))}))}),PlanetCryptoContractPlay.methods.taxEarningsAvailable().call({from:userWalletAddress},function(e,t){e||(tax_available=new BigNumber(t),updateInnerHTML("yourTaxAvailable",web3Connection.utils.fromWei(tax_available.toString(),"ether").substring(0,8)),updateInnerHTML("yourTaxAvailableMobile",web3Connection.utils.fromWei(tax_available.toString(),"ether").substring(0,8)))}))}function updateCurrentLandPrice(e){PlanetCryptoContract.methods.current_plot_price().call(function(t,r){if(t);else{currentLandPrice=new BigNumber(r),updateInnerHTML("currentLandPrice",web3Connection.utils.fromWei(currentLandPrice.toString(),"ether").substring(0,8));try{e&&e()}catch(e){}}})}function updateTotalLandSize(){var e=totalLandSize;totalLandSize>99999&&(e/=1e3),updateInnerHTML("totalLandSize",e+"m"),updateInnerHTML("totalLandSizeMobile",e+"m"),totalLandSize/20>700&&updateInnerHTML("startPlots",totalLandSize/20)}function withdrawFunds(){canPlay?tax_available.eq(0)?showError("You don't have any have tax earnings available at the moment.<br/><br/>The more land you own, the more property tax you'll ean - tax is earned instantly someone else buys land!<br/><br/>For more information check our the CryptoLand Guide (Click the blue help button above).","No Tax Earnings"):PlanetCryptoContractPlay.methods.withdrawTaxEarning().estimateGas({from:userWalletAddress},function(e,t){e?(console.log(e),showError("Unable to contact the blockchain - please try again.","Planet Crypto")):($.toast({heading:"Sending Transaction",text:"Check your Ethereum Wallet to complete the transaction",icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION}),PlanetCryptoContractPlay.methods.withdrawTaxEarning().send({from:userWalletAddress,gas:t,gasPrice:useGasPrice},function(e,t){if(e)$.toast({heading:"Withdrawal Cancelled",text:"Your withdrawel was cancelled and no GAS was spent - please try again!",icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION});else{var r="";r+='<p style="font-size: 10pt;"><i>Please Note: Your FUNDS will not appear instantly - it depends how busy the Ethereum network is. Please monitor with Etherscan.</i></p>',r+='<p style="font-size: 10pt;"><a href="https://etherscan.io/tx/'+t+'" target="_new">View Transaction on Etherscan</a></p>',r+='<p style="font-size: 10pt;">Share your Master Node link to earn 5%!</p>',r+="<p>",r+='<strong style="font-size: 12pt;">Your Referral Master Node Link</strong>',r+="</p>",r+='<p style="font-size: 10pt;">',r+='<code style="font-size: 8pt;">https://planetcrypto.app/?ref='+userWalletAddress+"</code>",r+="</p>",r+='<p style="font-size: 10pt;">',r+=" For every new player you refer on - you will earn 5% from purchases as an instant bonus!",r+="</p>",showError(r+='<p style="font-size: 10pt;"><b>The more players we have - the more profits you share!</b></p>',"Withdrawal Complete"),tax_available=new BigNumber(0),updateInnerHTML("yourTaxAvailable","0.000000"),updateInnerHTML("yourTaxAvailableMobile","0.000000")}}))}):$("#notConnectedModel").foundation("open")}function buyExistingCard(){canPlay?(showProcessing(),$.getJSON(ethGasStationAPI,function(e){if(isNaN(e.average))console.log("Unable to access ethgasstation"),buyExistingCardProcess();else{var t=new BigNumber(e.average).times(1e8);console.log("New Gas:",t.toString()),useGasPrice=parseInt(t.toString()),buyExistingCardProcess()}})):$("#notConnectedModel").foundation("open")}function buyExistingCardProcess(){web3Connection.utils.isAddress(_referer)||(_referer=web3Connection.utils.toChecksumAddress("0x0000000000000000000000000000000000000000")),PlanetCryptoContractPlay.methods.buyCard(existingCardTokenId,_referer).estimateGas({from:userWalletAddress,value:existingCardPaymentAmount},function(e,t){e?(console.log(e),showError("Purchase not possible - make sure your not trying to buy your own land!","Planet Crypto"),hideProcessing()):($.toast({heading:"Sending Transaction",text:"Check your Ethereum Wallet to complete the transaction",icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION}),PlanetCryptoContractPlay.methods.buyCard(existingCardTokenId,_referer).send({from:userWalletAddress,gas:t,gasPrice:useGasPrice,value:existingCardPaymentAmount},function(e,t){if(hideProcessing(),e)$.toast({heading:"Purchase Cancelled",text:"Your purchase was cancelled and no ETH was spent this time - please try again!",icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION});else{var r="";r+='<p style="font-size: 10pt;"><i>Please Note: Your Purchase will not appear instantly - it depends how busy the Ethereum network is. Please monitor with Etherscan.</i></p>',r+='<p style="font-size: 10pt;"><a href="https://etherscan.io/tx/'+t+'" target="_new">View Transaction on Etherscan</a></p>',r+='<p style="font-size: 10pt;">Share your Master Node link to earn 5%!</p>',r+="<p>",r+='<strong style="font-size: 12pt;">Your Referral Master Node Link</strong>',r+="</p>",r+='<p style="font-size: 10pt;">',r+='<code style="font-size: 8pt;">https://planetcrypto.app/?ref='+userWalletAddress+"</code>",r+="</p>",r+='<p style="font-size: 10pt;">',r+=" For every new player you refer on - you will earn 5% from purchases as an instant bonus!",r+="</p>",showError(r+='<p style="font-size: 10pt;"><b>The more players we have - the more profits you share!</b></p>',"Purchase Complete")}}))})}function buyWithEth(){canPlay?(showProcessing(),$.getJSON(ethGasStationAPI,function(e){if(isNaN(e.average))console.log("Unable to access ethgasstation"),buyWithEthProcess();else{var t=new BigNumber(e.average).times(1e8);console.log("New Gas:",t.toString()),useGasPrice=parseInt(t.toString()),buyWithEthProcess()}})):$("#notConnectedModel").foundation("open")}function buyWithEthProcess(){var e=document.getElementById("newCardName").value;if(e.length<4)return showError("Card Names must be at least 4 characters long","Name too short"),void hideProcessing();if(byteCount(e)>32)return showError("Card Names must be less than 33 Bytes in size.<br/><br/>Yours is currently: "+byteCount(e)+"<br/><br/>Please reduce the name size","Name Too Long!"),void hideProcessing();var t=[],r=[];for(key in rectsToBuy)t.push(parseInt(new BigNumber(hardFixed(rectsToBuy[key].lat,5)).times(1e6).toFixed(0))),r.push(parseInt(new BigNumber(hardFixed(rectsToBuy[key].lng,5)).times(1e6).toFixed(0)));web3Connection.utils.isAddress(_referer)||(console.log("Invalid Referer"),_referer=web3Connection.utils.toChecksumAddress("0x0000000000000000000000000000000000000000")),updateCurrentLandPrice(function(){var a,n=currentLandPrice*t.length;try{a=web3Connection.utils.utf8ToHex(e)}catch(t){a=web3Connection.utils.fromAscii(e)}PlanetCryptoContractPlay.methods.buyLand(a,t,r,_referer).estimateGas({from:userWalletAddress,value:n},function(e,o){e?(console.log(e),hideProcessing(),showError("Purchase not possible - check your not trying to buy part of someone elses land!","Planet Crypto")):($.toast({heading:"Sending Transaction",text:"Check your Ethereum Wallet to complete the transaction",icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION}),PlanetCryptoContractPlay.methods.buyLand(a,t,r,_referer).send({from:userWalletAddress,gas:o,gasPrice:useGasPrice,value:n},function(e,t){if(hideProcessing(),e)$.toast({heading:"Purchase Cancelled",text:"Your purchase was cancelled and no ETH was spent this time - please try again!",icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION});else{var r="";r+='<p style="font-size: 10pt;"><i>Please Note: Your Purchase will not appear instantly - it depends how busy the Ethereum network is. Please monitor with Etherscan.</i></p>',r+='<p style="font-size: 10pt;"><a href="https://etherscan.io/tx/'+t+'" target="_new">View Transaction on Etherscan</a></p>',r+='<p style="font-size: 10pt;">Share your Master Node link to earn 5%!</p>',r+="<p>",r+='<strong style="font-size: 12pt;">Your Referral Master Node Link</strong>',r+="</p>",r+='<p style="font-size: 10pt;">',r+='<code style="font-size: 8pt;">https://planetcrypto.app/?ref='+userWalletAddress+"</code>",r+="</p>",r+='<p style="font-size: 10pt;">',r+=" For every new player you refer on - you will earn 5% from purchases as an instant bonus!",r+="</p>",showError(r+='<p style="font-size: 10pt;"><b>The more players we have - the more profits you share!</b></p>',"Purchase Complete"),resetSelectedRects()}}))})})}function buyWithTokens(){canPlay?(showProcessing(),$.getJSON(ethGasStationAPI,function(e){if(isNaN(e.average))console.log("Unable to access ethgasstation"),buyWithTokenProcess();else{var t=new BigNumber(e.average).times(1e8);console.log("New Gas:",t.toString()),useGasPrice=parseInt(t.toString()),buyWithTokenProcess()}})):$("#notConnectedModel").foundation("open")}function buyWithTokenProcess(){var e=document.getElementById("newCardName").value;if(e.length<4)return showError("Card Names must be at least 4 characters long","Name too short"),void hideProcessing();if(byteCount(e)>32)return showError("Card Names must be less than 33 Bytes in size.<br/><br/>Yours is currently: "+byteCount(e)+"<br/><br/>Please reduce the name size","Name Too Long!"),void hideProcessing();var t,r=[],a=[];for(key in rectsToBuy)r.push(parseInt(new BigNumber(hardFixed(rectsToBuy[key].lat,5)).times(1e6).toFixed(0))),a.push(parseInt(new BigNumber(hardFixed(rectsToBuy[key].lng,5)).times(1e6).toFixed(0)));web3Connection.utils.isAddress(_referer)||(_referer=web3Connection.utils.toChecksumAddress("0x0000000000000000000000000000000000000000"));try{t=web3Connection.utils.utf8ToHex(e)}catch(r){t=web3Connection.utils.fromAscii(e)}PlanetCryptoContractPlay.methods.buyLandWithTokens(t,r,a).estimateGas({from:userWalletAddress},function(e,n){e?(console.log(e),showError("Purchase not possible - check you have UNLOCKED your PlanetCOINS tokens and that you have 1 Token for each plot of Land.","Planet Crypto"),hideProcessing()):($.toast({heading:"Sending Transaction",text:"Check your Ethereum Wallet to complete the transaction",icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION}),PlanetCryptoContractPlay.methods.buyLandWithTokens(t,r,a).send({from:userWalletAddress,gas:n,gasPrice:useGasPrice},function(e,t){if(hideProcessing(),e)$.toast({heading:"Purchase Cancelled",text:"Your purchase was cancelled and no PlanetCOINS were spent this time - please try again!",icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION});else{var r="";r+='<p style="font-size: 10pt;"><i>Please Note: Your Purchase will not appear instantly - it depends how busy the Ethereum network is. Please monitor with Etherscan.</i></p>',r+='<p style="font-size: 10pt;"><a href="https://etherscan.io/tx/'+t+'" target="_new">View Transaction on Etherscan</a></p>',r+='<p style="font-size: 10pt;">Share your Master Node link to earn 5%!</p>',r+="<p>",r+='<strong style="font-size: 12pt;">Your Referral Master Node Link</strong>',r+="</p>",r+='<p style="font-size: 10pt;">',r+='<code style="font-size: 8pt;">https://planetcrypto.app/?ref='+userWalletAddress+"</code>",r+="</p>",r+='<p style="font-size: 10pt;">',r+=" For every new player you refer on - you will earn 5% from purchases as an instant bonus!",r+="</p>",showError(r+='<p style="font-size: 10pt;"><b>The more players we have - the more profits you share!</b></p>',"Purchase Complete"),resetSelectedRects()}}))})}var currentPadlockstateLocked=!0;function switchCOINlockstatus(){if(!canPlay)return $("#notConnectedModel").foundation("open"),void(shownInitialWarning=!0);var e;e=currentPadlockstateLocked?yourCOINS:0,PlanetCryptoCoinContractPlay.methods.approve(contractAddress,e).estimateGas({from:userWalletAddress},function(t,r){t?(console.log(t),showError("Unable to contact blockchain - please refresh and try again","Planet Crypto")):($.toast({heading:"Altering PlanetCOINS State",text:"Check your Ethereum Wallet to complete the transaction",icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION}),PlanetCryptoCoinContractPlay.methods.approve(contractAddress,e).send({from:userWalletAddress,gas:r,gasPrice:useGasPrice},function(e,t){if(e)$.toast({heading:"Altering Transaction Cancelled",text:"Your transaction was cancelled and no ETH was spent this time - please try again!",icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION});else{var r="";r+='<p style="font-size: 10pt;"><i>Please Note: Your Transaction will not appear instantly - it depends how busy the Ethereum network is. Please monitor with Etherscan.</i></p>',r+='<p style="font-size: 10pt;"><a href="https://etherscan.io/tx/'+t+'" target="_new">View Transaction on Etherscan</a></p>',r+='<p style="font-size: 10pt;">Share your Master Node link to earn 5%!</p>',r+="<p>",r+='<strong style="font-size: 12pt;">Your Referral Master Node Link</strong>',r+="</p>",r+='<p style="font-size: 10pt;">',r+='<code style="font-size: 8pt;">https://planetcrypto.app/?ref='+userWalletAddress+"</code>",r+="</p>",r+='<p style="font-size: 10pt;">',r+=" For every new player you refer on - you will earn 5% from purchases as an instant bonus!",r+="</p>",showError(r+='<p style="font-size: 10pt;"><b>The more players we have - the more profits you share!</b></p>',"Transaction Sent"),currentPadlockstateLocked?($("#padlock").attr("src","images/padlock_open.png"),$("#padlockMobile").attr("src","images/padlock_open.png"),currentPadlockstateLocked=!1):($("#padlock").attr("src","images/padlock.png"),$("#padlockMobile").attr("src","images/padlock.png"),currentPadlockstateLocked=!0)}}))})}var QUERY_CACHE_TIME=15e3,queryCache={};function queryMap(e){var t;18==e&&(0,t=0),17==e&&(0,t=0),16==e&&(t=4),15==e&&(t=3,1e3),14==e&&(t=3,1e3),13==e&&(t=2,100);var r=mymap.getBounds(),a=[];Object.keys(tokens).forEach(function(n,o){var s=L.latLng([parseFloat(hardFixed(tokens[n].plots_lat[0]/1e6,5)),parseFloat(hardFixed(tokens[n].plots_lng[0]/1e6,5))]);if(r.contains(s))if(0==t)for(var i=n,l=tokens[n],d=0;d<l.card_size;d++){var c=L.latLng([parseFloat(hardFixed(l.plots_lat[d]/1e6,5)),parseFloat(hardFixed(l.plots_lng[d]/1e6,5))]);a.push({token_id:i,latLngPoint:c,token:l})}else{i=n,l=tokens[n];if(markersAllLvls[e+":"+i])markersAllLvls[e+":"+i].addTo(mymap);else{var u=L.MakiMarkers.icon({icon:"marker",color:"#"+l.token_owner.substring(l.token_owner.length-6),size:"m"}),p=L.marker(s,{icon:u}),g="<b style='font-size:1.2em;'>["+i+"] "+l.name+"</b><br/>";g+="<b>Owned By:</b><br/> "+l.token_owner,g+="<br/><b>Total Size:</b> "+l.card_size*PLOT_SIZE+"m<sup>2</sup>",g+="<br/><b>Empire Score:</b> "+l.empire_score,g+="<br/><b>Bought At:</b> "+web3Connection.utils.fromWei(l.current_value.toString(),"ether").substring(0,8)+" ETH",g+="<br/>~ You can run a hostile take-over and own this card for: "+web3Connection.utils.fromWei((l.current_value*CURRENT_RESALE_MULTIPLIER).toString(),"ether").substring(0,8),g+=" ETH.",g+="<br/>~ Doing so will also increase it's EMPIRE SCORE to: "+l.empire_score*CURRENT_EMPIRE_MULTIPLIER,g+="<br/> &nbsp;&nbsp; - increasing your score whilst reducing the previous owners!",g+="<br/><br/><center><span class='smallTxt'><strong>Click for full card details</strong></span></center>",p.bindTooltip(g),p.on("click",function(e){showExistingCard(i,!0)}),p.addTo(mymap),markersAllLvls[e+":"+i]=p}}else;}),0==t&&Object.keys(lightGrids[e].cellDetails).forEach(function(t,r){for(var n=0;n<a.length;n++)if(lightGrids[e].cellDetails[t].bounds.contains(a[n].latLngPoint)){var o=L.rectangle(lightGrids[e].cellDetails[t].bounds,{color:"#"+a[n].token.token_owner.substring(a[n].token.token_owner.length-6),weight:2,fillOpacity:.5});lightGrids[e].rects[lightGrids[e].cellDetails[t].key].token_id=a[n].token_id;var s="<b style='font-size:1.2em;'>["+a[n].token_id+"] "+a[n].token.name+"</b><br/>";s+="<b>Owned By:</b><br/> "+a[n].token.token_owner,s+="<br/><b>Total Size:</b> "+a[n].token.card_size*PLOT_SIZE+"m<sup>2</sup>",s+="<br/><b>Empire Score:</b> "+a[n].token.empire_score,s+="<br/><b>Bought At:</b> "+web3Connection.utils.fromWei(a[n].token.current_value.toString(),"ether").substring(0,8)+" ETH",s+="<br/>~ You can run a hostile take-over and own this card for: "+web3Connection.utils.fromWei((a[n].token.current_value*CURRENT_RESALE_MULTIPLIER).toString(),"ether").substring(0,8),s+=" ETH.",s+="<br/>~ Doing so will also increase it's EMPIRE SCORE to: "+a[n].token.empire_score*CURRENT_EMPIRE_MULTIPLIER,s+="<br/> &nbsp;&nbsp; - increasing your score whilst reducing the previous owners!",s+="<br/><br/><center><span class='smallTxt'><strong>Click for full card details</strong></span></center>",o.bindTooltip(s),o.token_id=a[n].token_id,o.on("click",function(e){showExistingCard(e.sourceTarget.token_id,!0)}),o.addTo(mymap),rectsDisplayedKeys.push(o);break}})}var existingCardStartPoint,rectsDisplayedKeys={},markersAllLvls={};function manageCaches(){}function clearMarkers(){for(key in markersAllLvls)markersAllLvls[key].removeFrom(mymap)}function clearGrids(){}function clearDisplayedKeys(){Object.keys(rectsDisplayedKeys).forEach(function(e,t){rectsDisplayedKeys[t].removeFrom(mymap),delete rectsDisplayedKeys[e]}),rectsDisplayedKeys=[]}function clearSelectedRects(){17!=mymap.getZoom()&&18!=mymap.getZoom()||Object.keys(lightGrids[mymap.getZoom()].rectList).forEach(function(e,t){lightGrids[mymap.getZoom()].rectList[e].removeFrom(mymap)})}function resetSelectedRects(){try{Object.keys(lightGrids[17].rectList).forEach(function(e,t){lightGrids[17].rectList[e].removeFrom(mymap)})}catch(e){}try{Object.keys(lightGrids[18].rectList).forEach(function(e,t){lightGrids[18].rectList[e].removeFrom(mymap)})}catch(e){}rectsToBuy={},actionMode="",allowedPlotsCircle&&allowedPlotsCircle.remove(),clearNewBuyCard(),updateNewCard()}var existingCardTokenId=0,existingCardPaymentAmount=0;function showExistingCard(e,t){existingCardTokenId=e,tokens[e]||console.log("Token not loaded...");var r=tokens[e];if(r){_findTokenId="",$("#existingCardHeader").css("background-color","#"+r.token_owner.substring(r.token_owner.length-6)),updateInnerHTML("existingCardOwner",isMobile?r.token_owner.substring(0,10)+"...":r.token_owner.substring(0,20)+"..."),document.getElementById("existingCardOwner").value=r.token_owner,r.plots_lng.length>1?updateInnerHTML("existingCardTotalPlots",r.plots_lng.length+" Plots"):updateInnerHTML("existingCardTotalPlots",r.plots_lng.length+" Plot");var a=parseInt(r.plots_lng.length)*PLOT_SIZE,n="m";a>99999&&(a/=1e3,n="km"),updateInnerHTML("existingCardTotalPlotsSize",a+n),updateInnerHTML("existingCardsEmpireScore",r.empire_score),updateInnerHTML("existingCardsCost",web3Connection.utils.fromWei(r.current_value.toString(),"ether").substring(0,8)),existingCardPaymentAmount=r.current_value*CURRENT_RESALE_MULTIPLIER,updateInnerHTML("existingCardBuyPrice",web3Connection.utils.fromWei((r.current_value*CURRENT_RESALE_MULTIPLIER).toString(),"ether").substring(0,8)),updateInnerHTML("existingCardNewEmpireScore",r.empire_score*CURRENT_EMPIRE_MULTIPLIER),updateInnerHTML("existingCardBadge",pad(r.empire_score,5)),updateInnerHTML("existingCardName",r.name),updateInnerHTML("existingCardStartPoint",r.plots_lat[0]/1e6+","+r.plots_lng[0]/1e6),existingCardStartPoint=L.latLng(r.plots_lat[0]/1e6,r.plots_lng[0]/1e6),t&&mymap.flyTo(existingCardStartPoint,MIN_BUY_LVL),share_url="https://planetcrypto.app/token/"+e,share_title="PlanetCrypto Property: "+r.name,share_description=r.name+" @ "+hardFixed(existingCardStartPoint.lat,4)+","+hardFixed(existingCardStartPoint.lng,4),share_description+=", owned by: "+r.token_owner,updateInnerHTML("existingCardsURL","planetcrypto.app/token/"+e),$("#existingCardDiv").foundation("open")}}function gotoExistingCardStartPoint(){try{mymap.getZoom(),mymap.flyTo(existingCardStartPoint,18)}catch(e){}}function setupMap(){(mymap=L.map("mapid",{doubleClickZoom:!1,zoomSnap:1,boxZoom:!1,scrollWheelZoom:!0}).setView([38.3796072,-93.0596094],5,{paddingTopLeft:[300,300]})).setMaxZoom(18),mymap.setMinZoom(2),layer=L.esri.basemapLayer("Streets").addTo(mymap);var e={url:"https://nominatim.openstreetmap.org/search?format=json&q={s}",jsonpParam:"json_callback",formatData:formatJSON,textPlaceholder:"Search...",autoType:!1,tipAutoSubmit:!0,autoCollapse:!0,autoCollapseTime:1e4,delayType:500,marker:{icon:!0}};mymap.addControl(new L.Control.Search(e)),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){_findTokenId.length>0||(t=new L.LatLng(e.coords.latitude,e.coords.longitude),console.log("Flying to:",t),mymap.flyTo(t));var t},function(e){}),mymap.on("click",function(e){console.log("MAP CLICK",e),""==actionMode&&$.toast({heading:"Use BUY LAND Tools",text:"Use the tools at the top of the page to purchase land.<br/><br/>Click the [?] symbol for the GAME GUIDE.",icon:"info",allowToastClose:!0,position:"bottom-right",hideAfter:TOAST_HIDE_DELAY,showHideTransition:TOAST_HIDE_TRANSITION})}),mymap.on("zoomstart",function(e){clearMarkers(),clearGrids(),clearDisplayedKeys(),clearSelectedRects()}),mymap.on("movestart",function(e){}),mymap.on("moveend",function(e){if(clearDisplayedKeys(),e.target._zoom>16){if(hardFixed(lightGrids[e.target._zoom].options.cellSize,2)!=hardFixed(getPixelSize(PLOT_SIZE),2)){var t=getPixelSize(PLOT_SIZE);lightGrids[e.target._zoom].remove(),lightGrids[e.target._zoom].removeFrom(mymap),lightGrids[e.target._zoom]=new VirtualGrid({cellSize:t,minZoom:e.target._zoom,maxZoom:e.target._zoom,zoomTriger:e.target._zoom}),lightGrids[e.target._zoom].on("cellsupdated",function(e){clearDisplayedKeys(),queryMap(e.target._map._zoom)}),lightGrids[e.target._zoom].addTo(mymap)}}else queryMap(e.target._zoom)}),mymap.on("gameDataReady",function(e){if(console.log("gameDataReady"),_findTokenId.length>0){try{document.getElementById("ogurl").content="https://planetcyrpto.app/token/"+_findTokenId}catch(e){}parseInt(_findTokenId)>0&&showExistingCard(parseInt(_findTokenId),!0)}queryMap(e.target._zoom),updateUserCards()}),mymap.on("zoomend",function(e){if(0==grid14Iinit&&14==e.target._zoom&&(rectsToBuyLen()>0&&(currentlySelectedMarker=L.marker(rectsToBuy[Object.keys(rectsToBuy)[0]],{title:"Your Currently Selectd Plots of Land to Buy",icon:blankCardIcon,riseOnHover:!0}).addTo(mymap)),grid14Iinit=!0),e.target._zoom>16)if(lightGrids[e.target._zoom])console.log("READY");else{var t=getPixelSize(PLOT_SIZE);lightGrids[e.target._zoom]=new VirtualGrid({cellSize:t,minZoom:e.target._zoom,maxZoom:e.target._zoom,zoomTriger:e.target._zoom}),lightGrids[e.target._zoom].on("cellsupdated",function(e){clearDisplayedKeys(),queryMap(e.target._map._zoom)}),lightGrids[e.target._zoom].addTo(mymap)}else e.target._zoom;e.target._zoom,e.target._zoom,e.target._zoom<15?(allowedPlotsCircle&&allowedPlotsCircle.remove(),currentlySelectedMarker&&1==currentlySelectedMarkerRemoved&&(currentlySelectedMarker.addTo(mymap),currentlySelectedMarkerRemoved=!1),e.target._zoom):(rectsToBuyLen()>0&&allowedPlotsCircle.addTo(mymap),currentlySelectedMarker&&(currentlySelectedMarker.remove(),currentlySelectedMarkerRemoved=!0))})}var currentBaseMapsHidden=!1;function toggleBasemaps(){currentBaseMapsHidden?($("#basemaps").removeClass("hide"),currentBaseMapsHidden=!1):($("#basemaps").addClass("hide"),currentBaseMapsHidden=!0)}function setBasemap(e){layer&&mymap.removeLayer(layer),layer=L.esri.basemapLayer(e),mymap.addLayer(layer),layerLabels&&mymap.removeLayer(layerLabels),"ShadedRelief"===e||"Oceans"===e||"Gray"===e||"DarkGray"===e||"Terrain"===e?(layerLabels=L.esri.basemapLayer(e+"Labels"),mymap.addLayer(layerLabels)):e.includes("Imagery")&&(layerLabels=L.esri.basemapLayer("ImageryLabels"),mymap.addLayer(layerLabels))}function changeBasemap(e){setBasemap(e.value)}function resetButtons(){document.getElementById("newCardName").value="",$("#buySingle").removeClass("secondary").addClass("success"),$("#buyMultiple").removeClass("secondary").addClass("success"),$("#removeSingle").removeClass("secondary").addClass("warning"),$("#removeAll").removeClass("secondary").addClass("alert"),$("#buySingleMobile").removeClass("secondary").addClass("success"),$("#removeSingleMobile").removeClass("secondary").addClass("warning"),$("#removeAllMobile").removeClass("secondary").addClass("alert")}function startBuyMultiple(){mymap.getZoom()<MIN_BUY_LVL&&mymap.setZoom(MIN_BUY_LVL),actionMode="BUYMULTI",resetButtons(),$("#buyMultiple").addClass("secondary").removeClass("success")}function startRemoveSingle(){mymap.getZoom()<MIN_BUY_LVL&&mymap.setZoom(MIN_BUY_LVL),actionMode="REMOVESINGLE",resetButtons(),$("#removeSingle").addClass("secondary").removeClass("warning"),$("#removeSingleMobile").addClass("secondary").removeClass("warning")}function startBuySingle(){mymap.getZoom()<MIN_BUY_LVL&&mymap.setZoom(MIN_BUY_LVL),actionMode="BUYSINGLE",resetButtons(),$("#buySingle").addClass("secondary").removeClass("success"),$("#buySingleMobile").addClass("secondary").removeClass("success")}function startRemoveAll(){resetSelectedRects(),resetButtons()}function showNewCard(){$("#newCardDiv").removeClass("hide")}function hideNewCard(){$("#newCardDiv").removeClass("hide").addClass("hide")}function gotoStartPointLink(){try{mymap.getZoom(),mymap.flyTo(L.latLng(document.getElementById("newCardStartPoint").innerHTML.split(",")),18)}catch(e){}}function updateNewCard(){var e=rectsToBuyLen();if(e>0){updateInnerHTML("newCardStartPoint",rectsToBuy[Object.keys(rectsToBuy)[0]].lat.toFixed(4)+","+rectsToBuy[Object.keys(rectsToBuy)[0]].lng.toFixed(4)),updateInnerHTML("newCardTotalPlots",e),updateInnerHTML("newCardTotalPlotsSize",20*e+"m");var t=currentLandPrice.times(e);try{updateInnerHTML("newCardsCost",web3Connection.utils.fromWei(t.toString(),"ether").substring(0,8))}catch(e){updateInnerHTML("newCardsCost",t.div(1e18).toString().substring(0,8))}updateInnerHTML("newCardsEmpireScore",e*currentEmpirePerPlot),updateInnerHTML("newPlanetCOINs",Math.floor(e/10)),updateInnerHTML("newCardBadge",pad(e*currentEmpirePerPlot,5)),checkforFirstPlot(e)}else{clearNewBuyCard();try{allowedPlotsCircle.remove()}catch(e){}delete allowedPlotsCircle}}function clearNewBuyCard(){$("#newCardDiv").addClass("hide"),updateInnerHTML("newCardStartPoint","--,--"),updateInnerHTML("newCardTotalPlots","0"),updateInnerHTML("newCardTotalPlotsSize","0m"),updateInnerHTML("newCardsCost","0"),hideNewCard()}function checkforFirstPlot(e){1==e&&(showNewCard(),allowedPlotsCircle&&allowedPlotsCircle.remove(),allowedPlotsCircle=L.circle(rectsToBuy[Object.keys(rectsToBuy)[0]],{color:"black",radius:MAX_BUY_RADIUS,fill:!1}),mymap.addLayer(allowedPlotsCircle))}function checkBuyPointAllowed(e,t){if(rectsToBuyLen()>0){var r=rectsToBuy[Object.keys(rectsToBuy)[0]];if(Math.abs(r.distanceTo(e))<=MAX_BUY_RADIUS)return!0;if(t){var a="<p>Each trading card can only hold plots of land that are within "+MAX_BUY_RADIUS+"m radius of the original plot.</p>";a+="<p>This helps prevent trading cards getting too split across the globe.</p>",showError(a+="<p>Please select a plot that is within the circle shown on the map.</p>","plot too far from original")}return!1}return!0}function coordsToKey(e){return e.x+":"+e.y+":"+e.z}function rectsToBuyLen(){return Object.keys(rectsToBuy).length}function getPixelSize(e){var t=mymap.getCenter(),r=mymap.latLngToContainerPoint(t),a=[r.x+1,r.y],n=[r.x,r.y+1],o=mymap.containerPointToLatLng(r),s=mymap.containerPointToLatLng(a),i=mymap.containerPointToLatLng(n);o.distanceTo(s);return hardFixed(e/o.distanceTo(i),2)}function getPixelSize2(e,t){var r=t.getCenter(),a=t.latLngToContainerPoint(r),n=[a.x+1,a.y],o=[a.x,a.y+1],s=t.containerPointToLatLng(a),i=t.containerPointToLatLng(n),l=t.containerPointToLatLng(o);s.distanceTo(i);return e/s.distanceTo(l)}function getUrlParameter(e){var t,r,a=decodeURIComponent(window.location.search.substring(1)).split("&");for(r=0;r<a.length;r++)if((t=a[r].split("="))[0]===e)return void 0===t[1]||t[1]}function formatJSON(e){var t,r,a={},n=[];for(var o in e)t=(n=e[o].display_name.split(","))[0]+", "+n[1],r=L.latLng(e[o].lat,e[o].lon),a[t]=r;return a}function showError(e,t){updateInnerHTML("errorHeader",t||"Bank Heist"),updateInnerHTML("errorContent",e),$("#errorMessage").foundation("open")}function updateInnerHTML(e,t){document.getElementById(e).innerHTML=t}function onlyUnique(e,t,r){return r.indexOf(e)===t}function hardFixed(e,t){if("0"==e)return 0;var r=e.toString().split(".");return r.length>0?parseFloat(r[0].toString()+"."+r[1].toString().substring(0,t)):parseFloat(r[0])}function normaliseLatLngUp(e){var t=e.toString().length,r=parseInt(e.toString().substring(t-1,1)),a=parseInt(e.toString().substring(t-2,1));return r<=5?parseFloat(e.toString().substring(0,t-1)+"1"):(a++,parseFloat(e.toString().substring(0,t-2)+a.toString()+"1"))}function normaliseLatLngDown(e){var t=e.toString().length,r=parseInt(e.toString().substring(t-1,1)),a=parseInt(e.toString().substring(t-2,1));return r>=5?(a++,parseFloat(e.toString().substring(0,t-1)+a.toString()+"1")):parseFloat(e.toString().substring(0,t-2)+"1")}function pad(e,t,r){return r=r||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(r)+e}var playerStats=[];function updatePreviousCards(){$("#userLostCards").empty(),$("#userLostCards2").empty(),canPlay&&Object.keys(tokens).forEach(function(e,t){processPreviousCardsToken(tokens[e],e)})}function processPreviousCardsToken(e,t){var r=!1;if(e.token_owner.toUpperCase()!=userWalletAddress.toUpperCase()){for(var a=0;a<e.buy_history.length;a++)if(e.buy_history[a].from.toUpperCase()==userWalletAddress.toUpperCase()){r=!0;break}if(r){var n;if(document.getElementById("latestCardFull"+t))try{n=document.getElementById("latestCardFull"+t).value}catch(e){}if(n);else{var o=latestCardsFull.replace(/\[\]/g,t);isMobile?$("#userLostCards2").prepend(o):$("#userLostCards").prepend(o)}$("#latestCardHeader"+t).css("background-color","#"+e.token_owner.substring(e.token_owner.length-6)),updateInnerHTML("latestCardsName"+t,e.name),updateInnerHTML("latestCardsCardOwner"+t,e.token_owner.substring(0,15)+"..."),updateInnerHTML("latestCardsStartPoint"+t,hardFixed(e.plots_lat[0]/1e6,4)+","+hardFixed(e.plots_lng[0]/1e6,4)),e.plots_lat.length>1?updateInnerHTML("latestCardsTotalPlots"+t,e.plots_lat.length+" Plots"):updateInnerHTML("latestCardsTotalPlots"+t,e.plots_lat.length+" Plot"),updateInnerHTML("latestCardsTotalPlotsSize"+t,e.plots_lat.length*PLOT_SIZE+"m<sup>"),updateInnerHTML("latestCardsEmpireScore"+t,e.empire_score),updateInnerHTML("latestCardsBadge"+t,pad(e.empire_score,5)),updateInnerHTML("latestCardsCost"+t,web3Connection.utils.fromWei(e.current_value.toString(),"ether").substring(0,8)),document.getElementById("latestCardFull"+t).value=t}}}function updateUserCards(){var e=Object.keys(tokens).length-50;e<0&&(e=0),playerStats=[],$("#latestCards").empty(),$("#latestCards2").empty(),$("#userLostCards").empty(),$("#userLostCards2").empty(),Object.keys(tokens).forEach(function(t,r){for(var a=tokens[t],n=-1,o=0;o<playerStats.length;o++)if(playerStats[o].playerAddress&&playerStats[o].playerAddress.toUpperCase()==a.token_owner.toUpperCase()){n=o;break}if(-1==n?playerStats.push({playerAddress:a.token_owner,totalEmpireScore:a.empire_score,totalLand:a.plots_lng.length}):(playerStats[n].totalEmpireScore=parseInt(playerStats[n].totalEmpireScore)+parseInt(a.empire_score),playerStats[n].totalLand=parseInt(playerStats[n].totalLand)+parseInt(a.plots_lng.length)),canPlay){if(tokens[t].token_owner.toUpperCase()==userWalletAddress.toUpperCase()){if(document.getElementById("userCardFull"+t)&&(i=document.getElementById("userCardFull"+t).value),i);else{var s=userCardsFull.replace(/\[\]/g,t);isMobile?$("#userCards2").prepend(s):$("#userCards").prepend(s)}$("#userCardHeader"+t).css("background-color","#"+a.token_owner.substring(a.token_owner.length-6)),updateInnerHTML("userCardsName"+t,a.name),updateInnerHTML("userCardsCardOwner"+t,a.token_owner.substring(0,15)+"..."),updateInnerHTML("userCardsStartPoint"+t,hardFixed(a.plots_lat[0]/1e6,4)+","+hardFixed(a.plots_lng[0]/1e6,4)),a.plots_lat.length>1?updateInnerHTML("userCardsTotalPlots"+t,a.plots_lat.length+" Plots"):updateInnerHTML("userCardsTotalPlots"+t,a.plots_lat.length+" Plot"),updateInnerHTML("userCardsTotalPlotsSize"+t,a.plots_lat.length*PLOT_SIZE+"m<sup>"),updateInnerHTML("userCardsEmpireScore"+t,a.empire_score),updateInnerHTML("userCardsBadge"+t,pad(a.empire_score,5)),updateInnerHTML("userCardsCost"+t,web3Connection.utils.fromWei(a.current_value.toString(),"ether").substring(0,8)),document.getElementById("userCardFull"+t).value=t}processPreviousCardsToken(a,t)}if(r==e){var i;if(document.getElementById("latestCardFull"+t))try{i=document.getElementById("latestCardFull"+t).value}catch(e){}if(i);else{s=latestCardsFull.replace(/\[\]/g,t);isMobile?$("#latestCards2").prepend(s):$("#latestCards").prepend(s)}$("#latestCardHeader"+t).css("background-color","#"+a.token_owner.substring(a.token_owner.length-6)),updateInnerHTML("latestCardsName"+t,a.name),updateInnerHTML("latestCardsCardOwner"+t,a.token_owner.substring(0,15)+"..."),updateInnerHTML("latestCardsStartPoint"+t,hardFixed(a.plots_lat[0]/1e6,4)+","+hardFixed(a.plots_lng[0]/1e6,4)),a.plots_lat.length>1?updateInnerHTML("latestCardsTotalPlots"+t,a.plots_lat.length+" Plots"):updateInnerHTML("latestCardsTotalPlots"+t,a.plots_lat.length+" Plot"),updateInnerHTML("latestCardsTotalPlotsSize"+t,a.plots_lat.length*PLOT_SIZE+"m<sup>"),updateInnerHTML("latestCardsEmpireScore"+t,a.empire_score),updateInnerHTML("latestCardsBadge"+t,pad(a.empire_score,5)),updateInnerHTML("latestCardsCost"+t,web3Connection.utils.fromWei(a.current_value.toString(),"ether").substring(0,8)),document.getElementById("latestCardFull"+t).value=t,e++}}),$("#LeaderboardTable").find("tr:gt(0)").remove(),$("#LeaderboardTable2").find("tr:gt(0)").remove();for(var t=playerStatsSortedByEmpireScore(),r=0;r<t.length;r++){var a='<tr><td width="500"><a href="https://etherscan.io/address/'+t[r].playerAddress+'" target="_new">'+t[r].playerAddress+"</a></td>",n='<tr><td width="500"><a href="https://etherscan.io/address/'+t[r].playerAddress+'" target="_new">'+t[r].playerAddress.substring(0,7)+"...</a></td>",o=parseInt(t[r].totalLand)*PLOT_SIZE,s="m";if(o>99999&&(o/=1e3,s="km"),a+='<td width="150">'+o+s+"<sup>2</sup></td>",n+='<td width="150">'+o+s+"<sup>2</sup></td>",a+='<td width="150">'+t[r].totalEmpireScore+"</td></tr>",n+='<td width="150">'+t[r].totalEmpireScore+"</td></tr>",$("#LeaderboardTable tbody").append(a),$("#LeaderboardTable2 tbody").append(n),r>=20)break}}function playerStatsSortedByEmpireScore(){return playerStats.sort(function(e,t){return parseInt(t.totalEmpireScore)-parseInt(e.totalEmpireScore)})}function playerStatsSortedByLand(){return playerStats.sort(function(e,t){return parseInt(t.totalLand)-parseInt(e.totalLand)})}function showGuide(){$("#welcomeDiv").foundation("close"),$("#guideDiv").foundation("open")}function showExistingUserCard(e){showExistingCard(e.value,!0)}function showLatestUserCard(e){$("#offCanvasRightLatestCards").foundation("close"),$("#offCanvasRightYourCards").foundation("close"),showExistingCard(e.value,!0)}var userCardsFull='<div class="userCardsItemFull" id="userCardFull[]" onclick="showExistingUserCard(this);">';userCardsFull+='                      <div class="large badge alert existingCardBadge" id="userCardsBadge[]">00000</div>',userCardsFull+="",userCardsFull+='                      <div class="card userCardItemInnerCardDiv"  >',userCardsFull+='                        <form style="padding: 4px;">',userCardsFull+='                          <div class="userCardsMainContent"><div style="background-color: rgba(255,255,255,0.9); width: 100%; height: 100%;">',userCardsFull+="                                ",userCardsFull+='                                <div id="userCardHeader[]" class="card-divider text-center userCardsHeader" >',userCardsFull+='                                  <div class="innerHeader">',userCardsFull+='                                    <strong style="font-size: 0.4em;">TITLE DEED</strong>',userCardsFull+='                                    <h4 style="width: 100%; background-color: #efefef; color: black; font-size:0.9em; overflow-y: scroll;" id="userCardsName[]"></h4>',userCardsFull+="                                    ",userCardsFull+="                                  </div>",userCardsFull+="                                </div>",userCardsFull+="",userCardsFull+='                                <div class="card-section" style="margin: 5px; padding:10px; ">',userCardsFull+='                                  <p class="smallTxt" style="font-weight: bold;">',userCardsFull+='                                    <img class="icon-house"/> <strong><span id="userCardsCardOwner[]">0x0</span></strong><br/>',userCardsFull+='                                    <img class="icon-compass"/> <strong><span id="userCardsStartPoint[]">0.0000, 0.0000</span></strong><br/>',userCardsFull+='                                    <img class="icon-size"/> <strong><span id="userCardsTotalPlots[]">0</span></strong><br/>',userCardsFull+='                                    <img class="icon-ruler"/> <strong><span id="userCardsTotalPlotsSize[]">0m</span><sup>2</sup></strong><br/>',userCardsFull+='                                    <img class="icon-trophy"/> <strong>+<span id="userCardsEmpireScore[]">0</span></strong><br/>',userCardsFull+='                                    <img class="icon-eth"/> <strong><span id="userCardsCost[]">0.000</span> ETH</strong></p>',userCardsFull+="",userCardsFull+="                                </div>",userCardsFull+="",userCardsFull+="                              </div></div>",userCardsFull+="",userCardsFull+="                        </form>",userCardsFull+="                      </div>",userCardsFull+="                    </div>";var latestCardsFull='<div class="userCardsItemFull" id="latestCardFull[]" onclick="showLatestUserCard(this);">';function byteCount(e){return encodeURI(e).split(/%..|./).length-1}function showProcessing(){$("#processingDiv").removeClass("hide")}function hideProcessing(){$("#processingDiv").addClass("hide")}function googleTranslateElementInit(){new google.translate.TranslateElement({pageLanguage:"en",includedLanguages:"ar,en,es,fr,jv,ko,pa,pt,ru,zh-CN,de,id,it",layout:google.translate.TranslateElement.InlineLayout.SIMPLE,autoDisplay:!1},"google_translate_element"),$("#google_translate_element").on("click",function(){$("iframe").contents().find(".goog-te-menu2-item div, .goog-te-menu2-item:link div, .goog-te-menu2-item:visited div, .goog-te-menu2-item:active div, .goog-te-menu2 *").css({color:"#544F4B","font-family":"Roboto",width:"100%"}),$("iframe").contents().find(".goog-te-menu2-item-selected").css("display","none"),$("iframe").contents().find(".goog-te-menu2").css("padding","0px"),$("iframe").contents().find(".goog-te-menu2-item div").css("padding","20px"),$("iframe").contents().find(".goog-te-menu2-item").css("width","100%"),$("iframe").contents().find("td").css("width","100%"),$("iframe").contents().find(".goog-te-menu2-item div").hover(function(){$(this).css("background-color","#4385F5").find("span.text").css("color","white")},function(){$(this).css("background-color","white").find("span.text").css("color","#544F4B")}),$("iframe").contents().find(".goog-te-menu2").css("border","none"),$(".goog-te-menu-frame").css("box-shadow","0 16px 24px 2px rgba(0, 0, 0, 0.14), 0 6px 30px 5px rgba(0, 0, 0, 0.12), 0 8px 10px -5px rgba(0, 0, 0, 0.3)"),$(".goog-te-menu-frame").css({height:"100%",width:"100%",top:"0px"}),$("iframe").contents().find(".goog-te-menu2").css({height:"100%",width:"100%"})})}function processJumpToLocationEvent(e){$("option:selected",e);var t=e.value;"token"==t.substring(0,5)?_findTokenId=t.split(":")[1]:mymap.flyTo(L.latLng(t.split(",")[0],t.split(",")[1]),10)}latestCardsFull+='                      <div class="large badge alert existingCardBadge" id="latestCardsBadge[]">00000</div>',latestCardsFull+="",latestCardsFull+='                      <div class="card userCardItemInnerCardDiv"  >',latestCardsFull+='                        <form style="padding: 4px;">',latestCardsFull+='                          <div class="userCardsMainContent"><div style="background-color: rgba(255,255,255,0.9); width: 100%; height: 100%;">',latestCardsFull+="                                ",latestCardsFull+='                                <div id="latestCardHeader[]" class="card-divider text-center userCardsHeader" >',latestCardsFull+='                                  <div class="innerHeader">',latestCardsFull+='                                    <strong style="font-size: 0.4em;">TITLE DEED</strong>',latestCardsFull+='                                    <h4 style="width: 100%; background-color: #efefef; color: black; font-size:0.9em; overflow-y: scroll;" id="latestCardsName[]"></h4>',latestCardsFull+="                                    ",latestCardsFull+="                                  </div>",latestCardsFull+="                                </div>",latestCardsFull+="",latestCardsFull+='                                <div class="card-section" style="margin: 5px; padding:10px; ">',latestCardsFull+='                                  <p class="smallTxt" style="font-weight: bold;">',latestCardsFull+='                                    <img class="icon-house"/> <strong><span id="latestCardsCardOwner[]">0x0</span></strong><br/>',latestCardsFull+='                                    <img class="icon-compass"/> <strong><span id="latestCardsStartPoint[]">0.0000, 0.0000</span></strong><br/>',latestCardsFull+='                                    <img class="icon-size"/> <strong><span id="latestCardsTotalPlots[]">0</span></strong><br/>',latestCardsFull+='                                    <img class="icon-ruler"/> <strong><span id="latestCardsTotalPlotsSize[]">0m</span><sup>2</sup></strong><br/>',latestCardsFull+='                                    <img class="icon-trophy"/> <strong>+<span id="latestCardsEmpireScore[]">0</span></strong><br/>',latestCardsFull+='                                    <img class="icon-eth"/> <strong><span id="latestCardsCost[]">0.000</span> ETH</strong></p>',latestCardsFull+="",latestCardsFull+="                                </div>",latestCardsFull+="",latestCardsFull+="                              </div></div>",latestCardsFull+="",latestCardsFull+="                        </form>",latestCardsFull+="                      </div>",latestCardsFull+="                    </div>";
