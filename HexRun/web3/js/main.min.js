$(function(){function a(a){return 1e9*a}function b(){console.log("READONLY SETUP"),va=new Web3.providers.WebsocketProvider("wss://mainnet.infura.io/ws/v3/b75603beb83a4a1a8a6e482eba7589a3"),console.log("RO PROV:",va),va.on("connect",function(){wa=new Web3(va),xa=new wa.eth.Contract(hexrunAbi.abi,"0x19465ce34f3e41f1cbd29ba57e881fc65f067ee0"),setTimeout(function(){o()},2e3)}),va.on("error",function(){c(0)}),va.on("end",function(){c(0)})}function c(a){try{console.log("restarting..."),va=new Web3.providers.WebsocketProvider("wss://mainnet.infura.io/ws/v3/b75603beb83a4a1a8a6e482eba7589a3"),va.on("connect",function(){console.log("WSS Reconnected"),wa=new Web3(va),xa=new wa.eth.Contract(hexrunAbi.abi,"0x2b591e99afE9f32eAA6214f7B7629768c40Eeb39")}),va.on("error",function(b){console.log("reconnect error",b),c(a++)}),va.on("end",function(b){console.log("reconnect end",b),c(a++)})}catch(b){console.log(b),a++,20>a&&setTimeout(function(){c(a)},500)}}function d(){for(let a=0;10>a;a++)ba.push(0);console.log("usersActiveInLvls:",ba),S=new Web3(window.web3.currentProvider),D(m)}function e(){T.methods.allowance(V,"0x19465ce34f3e41f1cbd29ba57e881fc65f067ee0").call(function(a,b){let c=!1;(Na||Oa)&&(0==ma%5&&Q("We are still checking the blockchain for your transaction... please wait while it is processed.","Processing Transaction"),ma++,console.log("HEX CHECK:",fa,b),fa==b?c=!0:(Na=!1,Oa=!1,$("#loadingDiv").addClass("hide"))),fa=b,$("#approvedHex").html(new BigNumber(b).div(100000000).toFixed(2)+" HEX"),$("#buyApprovedHex").html(new BigNumber(b).div(100000000).toFixed(2)+" HEX"),$("#buyApprovedHex2").html(new BigNumber(b).div(100000000).toFixed(2)+" HEX"),A(),B(),C(),"0"==b&&!1==c&&setTimeout(function(){e()},5e3),c&&setTimeout(function(){n()},1500)})}function f(){0==ma%5&&Q("We are still checking the blockchain for your transaction... please wait while it is processed.","Processing Transaction"),ma++,U.methods.viewUserLevelExpired(V,Ra).call(function(a,b){let c=!0;console.log("checkUserLvls:",a,Ra,b,Sa),!a&&parseInt(b)>parseInt(Sa)&&(c=!1,$("#loadingDiv").addClass("hide"),Pa?($("#registrationPanel").foundation("close"),Q("Registration now complete ~ welcome to the game!","HEXRun Registration"),setTimeout(function(){g()},2500),setTimeout(function(){e()},3e3)):($("#buyLvlPanel").foundation("close"),$("#buyLvlPanel2").foundation("close"),Q("Level Purchase complete ~ welcome to your upgrade!","HEXRun Level Upgrade"),setTimeout(function(){g()},2500),setTimeout(function(){e()},3e3))),c&&(Qa||Pa)&&2e3>ma&&setTimeout(function(){f()},1500)})}function g(a){console.log("CHECKING USER..."),F(V,function(b,c){console.log("USER...",b,c),b||(console.log(c),!0==c.isExist&&($("#registrationDiv").addClass("hide"),$("#loggedInDiv").removeClass("hide"),Y?($("#userAddress").html(V.substring(0,20)),$("#dashboardAddress").html(V.substring(0,20)),$("#dashboardAddress2").html(V.substring(0,20))):($("#userAddress").html(V),$("#dashboardAddress").html(V),$("#dashboardAddress2").html(V),console.log("dashboardAddress2",V)),$("#refURL").val("https://HEXRun.network/?id="+c.id),$("#dashboardRefURL").val("https://HEXRun.network/?id="+c.id),$("#dashboardRefURL2").val("https://HEXRun.network/?id="+c.id),U.methods.userList(c.referrerID).call(function(a,b){a||(Y?($("#refByTrue").html(b.substring(0,20)),$("#dashboardMatrix").html(b.substring(0,20)),$("#dashboardMatrix2").html(b.substring(0,20))):($("#refByTrue").html(b),$("#dashboardMatrix").html(b),$("#dashboardMatrix2").html(b)))}),Ma=!1,s(1),Q("Welcome back to HEXRun ~ don't forget to share your REF-LINK to keep earning!",null,15e3)),a?a():!c.isExist&&setTimeout(function(){g()},2e3))})}function h(){var a=window.open("https://etherscan.io/address/0x19465ce34f3e41f1cbd29ba57e881fc65f067ee0","_blank");a.focus()}function i(){var a=window.open("https://hexrun.network/HEXRun.pdf","_blank");a.focus()}function j(){$.ajax({type:"GET",url:"https://api.coinbase.com/v2/exchange-rates?currency=BTC",data:{get_param:"value"},dataType:"json",success:function(a){console.log("BTC PRICE:",a.data.rates.USD),Ca=a.data.rates.ETH,Da=a.data.rates.USD}}),$.ajax({type:"GET",url:"https://api.coingecko.com/api/v3/simple/price?ids=hex&vs_currencies=eth",type:"GET",headers:{"Access-Control-Allow-Origin":"*"},crossDomain:!0,dataType:"json",success:function(a){console.log(a),console.log("HEX PRICE:",a.hex.eth),Ba=a.hex.eth}})}function k(){$.ajax({type:"GET",url:"https://ethgasstation.info/json/ethgasAPI.json",data:{get_param:"value"},dataType:"json",success:function(a){console.log("GAS PRICES:",a,a.fast,a.fastest,a.average),ta=a.fast/10}})}function l(){const a=new Date(2020,4,27),b=new Date,c=Math.round(Math.abs((a-b)/86400000));1<c?$("#activeDays").html(+(c-1)+" days"):$("#activeDays").html(+(c-1)+" day")}function m(){function a(){E(function(){let a=100;Y&&(a=1e3),g(function(){H()}),setTimeout(function(){G()},a),setTimeout(function(){n()},a)})}console.log("STARTING GAME"),jQuery.timeago.settings.allowFuture=!0,j(),k(),l(),Y?setTimeout(function(){a()},1e3):a(),t()}function n(){T.methods.balanceOf(V).call(function(a,b){new BigNumber(b).gt(0)&&(ea=b,$("#walletHex").html(new BigNumber(b).div(100000000).toFixed(2)+" HEX"),$("#buyWalletHex").html(new BigNumber(b).div(100000000).toFixed(2)+" HEX"),$("#buyWalletHex2").html(new BigNumber(b).div(100000000).toFixed(2)+" HEX"),"0"==b?setTimeout(function(){n()},5e3):setTimeout(function(){e()},100))})}function o(){let a=14400;S.eth.getBlockNumber().then(function(b){let c=parseInt(b);Y?xa.getPastEvents("allEvents",{fromBlock:a,toBlock:"latest"},function(a,b){console.log("RO EVENTS:",b);let d=0;for(let e=b.length-1;0<e&&(r(b[e],!1),d++,!(20<d));e--);}):U.getPastEvents("allEvents",{filter:{},fromBlock:c-a,toBlock:"latest"}).then(function(a){let b=0;for(let d=a.length-1;0<d&&(r(a[d],!1),b++,!(20<b));d--);})}),Y?(xa.getPastEvents("getMoneyForLevelEvent",{filter:{_user:V},fromBlock:10148898,toBlock:"latest"},function(a,b){p(b)}),xa.getPastEvents("lostMoneyForLevelEvent",{filter:{_user:V},fromBlock:10148898,toBlock:"latest"},function(a,b){q(b)})):(U.events.allEvents({filter:{},fromBlock:"latest"}).on("data",function(a){console.log("NEW EVENT:",a),r(a,!0)}),U.getPastEvents("getMoneyForLevelEvent",{filter:{_user:V},fromBlock:0,toBlock:"latest"},function(a,b){p(b)}),U.getPastEvents("lostMoneyForLevelEvent",{filter:{_user:V},fromBlock:0,toBlock:"latest"},function(a,b){q(b)}))}function p(a){for(let b,d=0;d<a.length;d++){b=2e3;for(let c=1;c<parseInt(a[d].returnValues._level);c++)b*=2;Ga+=b,Ia[parseInt(a[d].returnValues._level)-1]++}console.log("PAYMENT LVLS:",Ga,Ia);for(let b=0;10>b;b++)$("#dashboardLvl"+ +(b+1)+"Received").html(Ia[b]);$("#dashboardEarned").html(Ga+" HEX"),$("#dashboardEarned2").html(Ga+" HEX")}function q(a){for(let b,d=0;d<a.length;d++){b=2e3;for(let c=1;c<parseInt(a[d].returnValues._level);c++)b*=2;Ha+=b,Ja[parseInt(a[d].returnValues._level)-1]++}console.log("LOST LVLS:",Ha,Ja);for(let b=0;10>b;b++)$("#dashboardLvl"+ +(b+1)+"Missed").html(Ja[b])}function r(a,b){let c=!1;if(Ea.includes(a.transactionHash+":"+a.event+":"+a.logIndex))return;Ea.push(a.transactionHash+":"+a.event+":"+a.logIndex);let d=new Date(1e3*parseInt(a.returnValues._time)).toISOString(),e=2e3;for(let d=1;d<parseInt(a.returnValues._level);d++)e*=2;let f="<tr class='eventsRow'><td><time class='timeago' datetime='"+d+"'>"+d+"</time></td>";if("regLevelEvent"==a.event&&(c=!0,f+="<td>New Player! "+a.returnValues._user.substring(0,10)+"</td>",b&&Q("New Player! "+a.returnValues._user.substring(0,10),"New Player!")),"buyLevelEvent"==a.event&&(c=!0,f+="<td>"+a.returnValues._user.substring(0,10)+" BOUGHT IN TO LVL: "+a.returnValues._level+"!</td>",b&&Q(a.returnValues._user.substring(0,10)+" BOUGHT IN TO LVL: "+a.returnValues._level+"!","User Upgrade!")),"lostMoneyForLevelEvent"==a.event&&(c=!0,f+="<td>"+a.returnValues._user.substring(0,10)+" HAS LOST OUT ON MONEY FROM LVL:"+a.returnValues._level+"</td>",b&&Q(a.returnValues._user.substring(0,10)+" HAS LOST OUT ON MONEY FROM LVL:"+a.returnValues._level+"!","User Missed Out!")),f+="<td><img src=\"images/hex-icon-sm.png\" class=\"hexIcon\"/><span class=\"orange\">"+e+" HEX</span></td>",f+="<td><a href=\"https://etherscan.io/tx/"+a.transactionHash+"\" target=\"_new\">"+a.transactionHash.substring(0,10)+"</a.</td></tr>",c){if(b?$("#eventsTable tbody").prepend(f):$("#eventsTable tbody").append(f),Fa++,10<Fa){var g=$("#eventsTable tbody").find("tr:last");g.is(":first-child")||g.remove()}$("time.timeago").timeago()}}function s(a){U.methods.viewUserLevelExpired(V,a).call(function(b,c){let d=!1;if(parseInt(c)>new Date().getTime()/1e3&&(ka=a,d=!0,Ka[a]=!0),La[a]=parseInt(c),Ma?($("#dashboardBuyLvl"+ +a).removeClass("disabled"),$("#dashboardBuyLvl"+ +a).addClass("disabled")):$("#dashboardBuyLvl"+ +a).removeClass("disabled"),!1==d&&!1==Ma&&(Ma=!0),1==a&&(sa.lvl1=parseInt(c),$("#dashboardLvl1Expires").html(jQuery.timeago(new Date(1e3*c).toISOString())),d?($("#dashboardLvl1Active").html("YES"),$("#dashboardBuyLvl1").html("EXTEND LVL 1"),$("#dashboardLvl1Stats").removeClass("hide")):($("#dashboardLvl1Active").html("NO"),$("#dashboardLvl1Stats").removeClass("hide"),$("#dashboardLvl1Stats").addClass("hide"),$("#dashboardBuyLvl1").html("BUY LVL 1"))),2==a&&(sa.lvl2=parseInt(c),$("#dashboardLvl2Expires").html(jQuery.timeago(new Date(1e3*c).toISOString())),d?($("#dashboardLvl2Active").html("YES"),$("#dashboardBuyLvl2").html("EXTEND LVL 2"),$("#dashboardLvl2Stats").removeClass("hide")):($("#dashboardLvl2Active").html("NO"),$("#dashboardLvl2Stats").removeClass("hide"),$("#dashboardLvl2Stats").addClass("hide"),$("#dashboardBuyLvl2").html("BUY LVL 2"))),3==a&&(sa.lvl3=parseInt(c),$("#dashboardLvl3Expires").html(jQuery.timeago(new Date(1e3*c).toISOString())),d?($("#dashboardLvl3Active").html("YES"),$("#dashboardBuyLvl3").html("EXTEND LVL 3"),$("#dashboardLvl3Stats").removeClass("hide")):($("#dashboardLvl3Active").html("NO"),$("#dashboardLvl3Stats").removeClass("hide"),$("#dashboardLvl3Stats").addClass("hide"),$("#dashboardBuyLvl3").html("BUY LVL 3"))),4==a&&(sa.lvl4=parseInt(c),$("#dashboardLvl4Expires").html(jQuery.timeago(new Date(1e3*c).toISOString())),d?($("#dashboardLvl4Active").html("YES"),$("#dashboardBuyLvl4").html("EXTEND LVL 4"),$("#dashboardLvl4Stats").removeClass("hide")):($("#dashboardLvl4Active").html("NO"),$("#dashboardLvl4Stats").removeClass("hide"),$("#dashboardLvl4Stats").addClass("hide"),$("#dashboardBuyLvl4").html("BUY LVL 4"))),5==a&&(sa.lvl5=parseInt(c),$("#dashboardLvl5Expires").html(jQuery.timeago(new Date(1e3*c).toISOString())),d?($("#dashboardLvl5Active").html("YES"),$("#dashboardBuyLvl5").html("EXTEND LVL 5"),$("#dashboardLvl5Stats").removeClass("hide")):($("#dashboardLvl5Active").html("NO"),$("#dashboardLvl5Stats").removeClass("hide"),$("#dashboardLvl5Stats").addClass("hide"),$("#dashboardBuyLvl5").html("BUY LVL 5"))),6==a&&(sa.lvl6=parseInt(c),$("#dashboardLvl6Expires").html(jQuery.timeago(new Date(1e3*c).toISOString())),d?($("#dashboardLvl6Active").html("YES"),$("#dashboardBuyLvl6").html("EXTEND LVL 6"),$("#dashboardLvl6Stats").removeClass("hide")):($("#dashboardLvl6Active").html("NO"),$("#dashboardLvl6Stats").removeClass("hide"),$("#dashboardLvl6Stats").addClass("hide"),$("#dashboardBuyLvl6").html("BUY LVL 6"))),7==a&&(sa.lvl7=parseInt(c),$("#dashboardLvl7Expires").html(jQuery.timeago(new Date(1e3*c).toISOString())),d?($("#dashboardLvl7Active").html("YES"),$("#dashboardBuyLvl7").html("EXTEND LVL 7"),$("#dashboardLvl7Stats").removeClass("hide")):($("#dashboardLvl7Active").html("NO"),$("#dashboardLvl7Stats").removeClass("hide"),$("#dashboardLvl7Stats").addClass("hide"),$("#dashboardBuyLvl7").html("BUY LVL 7"))),8==a&&(sa.lvl8=parseInt(c),$("#dashboardLvl8Expires").html(jQuery.timeago(new Date(1e3*c).toISOString())),d?($("#dashboardLvl8Active").html("YES"),$("#dashboardBuyLvl8").html("EXTEND LVL 8"),$("#dashboardLvl8Stats").removeClass("hide")):($("#dashboardLvl8Active").html("NO"),$("#dashboardLvl8Stats").removeClass("hide"),$("#dashboardLvl8Stats").addClass("hide"),$("#dashboardBuyLvl8").html("BUY LVL 8"))),9==a&&(sa.lvl9=parseInt(c),$("#dashboardLvl9Expires").html(jQuery.timeago(new Date(1e3*c).toISOString())),d?($("#dashboardLvl9Active").html("YES"),$("#dashboardBuyLvl9").html("EXTEND LVL 9"),$("#dashboardLvl9Stats").removeClass("hide")):($("#dashboardLvl9Active").html("NO"),$("#dashboardLvl9Stats").removeClass("hide"),$("#dashboardLvl9Stats").addClass("hide"),$("#dashboardBuyLvl9").html("BUY LVL 9"))),10==a&&(sa.lvl10=parseInt(c),$("#dashboardLvl10Expires").html(jQuery.timeago(new Date(1e3*c).toISOString())),d?($("#dashboardLvl10Active").html("YES"),$("#dashboardBuyLvl10").html("EXTEND LVL 10"),$("#dashboardLvl10Stats").removeClass("hide")):($("#dashboardLvl10Active").html("NO"),$("#dashboardLvl10Stats").removeClass("hide"),$("#dashboardLvl10Stats").addClass("hide"),$("#dashboardBuyLvl10").html("BUY LVL 10"))),11>parseInt(a))s(a+1);else{if(console.log("LVLS:",sa,ka),10==ka)la||($("#buyNxtLvlBtn").addClass("hide"),la=!0);else{la&&($("#buyNxtLvlBtn").removeClass("hide"),la=!1),oa=parseInt(ka+1),pa=2e3;for(let a=1;a<oa;a++)pa*=2;$("#buyNxtLvlBtn").html("BUY LVL "+oa),$("#buyHexApproveRequirements").html(pa),$("#buyHexApprove").val(pa),$("#buyPanelLvlTitle").html("Buy Level "+oa),$("#buyLvlCost").html(pa+" HEX"),$("#buyApproveTxt").html(pa)}$("#currentLvl").html(ka)}})}function t(){var a=document.querySelector(".js-shareUrl"),b=R(a);a.addEventListener("click",b,!1);var c=document.querySelector(".js-shareUrl2"),d=R(c);c.addEventListener("click",d,!1);var e=document.querySelector(".js-shareUrl3"),f=R(e);e.addEventListener("click",f,!1),$("#viewContractBtn").click(function(){h()}),$("#gameGudeBtn").click(function(){i()}),$("#dashboardBtn").click(function(){ha?$("#dashboardPanel").foundation("open"):O()}),$("#dashboardBtn2").click(function(){ha?$("#dashboardPanel").foundation("open"):O()}),$("#matrixBtn").click(function(){if(!ha)O();else{var a=$("#matrixOuter"),b=$("#matrixInner > div");let c=(a.width()-b.width())/2;$("#matrixOuter").scrollLeft(5e3),$("#matrixOuter").stop().animate({scrollLeft:"+="+c},500),I(V,2,0,0),$("#dashboardPanel2").foundation("open")}}),$("#registerBtn").click(function(){ha?(n(),$("#registrationPanel").foundation("open")):O()}),$("#registrationApproveHexBtn").click(function(){ha?x():O()}),$("#regCompleteBtn").click(function(){ha?u():O()}),$("#buyNxtLvlBtn").click(function(){ha?$("#buyLvlPanel").foundation("open"):O()}),$("#buyApproveHexBtn").click(function(){ha?y():O()}),$("#buyCompleteBtn").click(function(){ha?v():O()}),$("#scanFreeRefs").click(function(){ha?($("#scanTitle").html("Searching:"),M(0),$("#refScanPanel").foundation("open")):O()}),$("#dashboardBuyLvl1").click(function(){$("#dashboardPanel").foundation("close"),ha?(qa=2e3,ra=1,na=La[1],$("#buyHexApproveRequirements2").html("2000"),$("#buyHexApprove2").val(2e3),$("#buyLvlCost2").html("2000"),$("#buyApproveTxt2").html("2000"),!0==Ka[1]?$("#buyPanelLvlTitle2").html("Extend Lvl 1"):$("#buyPanelLvlTitle2").html("Buy Lvl 1"),$("#buyLvlPanel2").foundation("open")):O()}),$("#dashboardBuyLvl2").click(function(){$("#dashboardPanel").foundation("close"),ha?(qa=4e3,ra=2,na=La[2],$("#buyHexApproveRequirements2").html(qa),$("#buyHexApprove2").val(qa),$("#buyLvlCost2").html(qa),$("#buyApproveTxt2").html(qa),!0==Ka[2]?$("#buyPanelLvlTitle2").html("Extend Lvl "+ra):$("#buyPanelLvlTitle2").html("Buy Lvl "+ra),$("#buyLvlPanel2").foundation("open")):O()}),$("#dashboardBuyLvl3").click(function(){$("#dashboardPanel").foundation("close"),ha?(qa=8e3,ra=3,na=La[3],$("#buyHexApproveRequirements2").html(qa),$("#buyHexApprove2").val(qa),$("#buyLvlCost2").html(qa),$("#buyApproveTxt2").html(qa),!0==Ka[3]?$("#buyPanelLvlTitle2").html("Extend Lvl "+ra):$("#buyPanelLvlTitle2").html("Buy Lvl "+ra),$("#buyLvlPanel2").foundation("open")):O()}),$("#dashboardBuyLvl4").click(function(){$("#dashboardPanel").foundation("close"),ha?(qa=16e3,ra=4,na=La[4],$("#buyHexApproveRequirements2").html(qa),$("#buyHexApprove2").val(qa),$("#buyLvlCost2").html(qa),$("#buyApproveTxt2").html(qa),!0==Ka[4]?$("#buyPanelLvlTitle2").html("Extend Lvl "+ra):$("#buyPanelLvlTitle2").html("Buy Lvl "+ra),$("#buyLvlPanel2").foundation("open")):O()}),$("#dashboardBuyLvl5").click(function(){$("#dashboardPanel").foundation("close"),ha?(qa=32e3,ra=5,na=La[5],$("#buyHexApproveRequirements2").html(qa),$("#buyHexApprove2").val(qa),$("#buyLvlCost2").html(qa),$("#buyApproveTxt2").html(qa),!0==Ka[5]?$("#buyPanelLvlTitle2").html("Extend Lvl "+ra):$("#buyPanelLvlTitle2").html("Buy Lvl "+ra),$("#buyLvlPanel2").foundation("open")):O()}),$("#dashboardBuyLvl6").click(function(){$("#dashboardPanel").foundation("close"),ha?(qa=64e3,ra=6,na=La[6],$("#buyHexApproveRequirements2").html(qa),$("#buyHexApprove2").val(qa),$("#buyLvlCost2").html(qa),$("#buyApproveTxt2").html(qa),!0==Ka[6]?$("#buyPanelLvlTitle2").html("Extend Lvl "+ra):$("#buyPanelLvlTitle2").html("Buy Lvl "+ra),$("#buyLvlPanel2").foundation("open")):O()}),$("#dashboardBuyLvl7").click(function(){$("#dashboardPanel").foundation("close"),ha?(qa=128e3,ra=7,na=La[7],$("#buyHexApproveRequirements2").html(qa),$("#buyHexApprove2").val(qa),$("#buyLvlCost2").html(qa),$("#buyApproveTxt2").html(qa),!0==Ka[7]?$("#buyPanelLvlTitle2").html("Extend Lvl "+ra):$("#buyPanelLvlTitle2").html("Buy Lvl "+ra),$("#buyLvlPanel2").foundation("open")):O()}),$("#dashboardBuyLvl8").click(function(){$("#dashboardPanel").foundation("close"),ha?(qa=256e3,ra=8,na=La[8],$("#buyHexApproveRequirements2").html(qa),$("#buyHexApprove2").val(qa),$("#buyLvlCost2").html(qa),$("#buyApproveTxt2").html(qa),!0==Ka[8]?$("#buyPanelLvlTitle2").html("Extend Lvl "+ra):$("#buyPanelLvlTitle2").html("Buy Lvl "+ra),$("#buyLvlPanel2").foundation("open")):O()}),$("#dashboardBuyLvl9").click(function(){$("#dashboardPanel").foundation("close"),ha?(qa=512e3,ra=9,na=La[9],$("#buyHexApproveRequirements2").html(qa),$("#buyHexApprove2").val(qa),$("#buyLvlCost2").html(qa),$("#buyApproveTxt2").html(qa),!0==Ka[9]?$("#buyPanelLvlTitle2").html("Extend Lvl "+ra):$("#buyPanelLvlTitle2").html("Buy Lvl "+ra),$("#buyLvlPanel2").foundation("open")):O()}),$("#dashboardBuyLvl10").click(function(){$("#dashboardPanel").foundation("close"),ha?(qa=1024e3,ra=10,na=La[10],$("#buyHexApproveRequirements2").html(qa),$("#buyHexApprove2").val(qa),$("#buyLvlCost2").html(qa),$("#buyApproveTxt2").html(qa),!0==Ka[10]?$("#buyPanelLvlTitle2").html("Extend Lvl "+ra):$("#buyPanelLvlTitle2").html("Buy Lvl "+ra),$("#buyLvlPanel2").foundation("open")):O()}),$("#buyApproveHexBtn2").click(function(){ha?z():O()}),$("#buyCompleteBtn2").click(function(){ha?w(ra):O()})}function u(){U.methods.regUser(W,new BigNumber(2e3).times(100000000).toFixed()).estimateGas({from:V},function(b,c){return b?void Q("There was an error with your registration - please check you have the correct amount of HEX in your wallet and try again","HEXRun Registration Error",15e3):void(Q("HEXRun Registration sent - when the tx is complete it will show up here!","HEXRun Registration",15e3),ma=0,Pa=!0,Qa=!1,Ra=1,Sa=0,setTimeout(function(){f()},2500),U.methods.regUser(W,new BigNumber(2e3).times(100000000).toFixed()).send({from:V,gasPrice:a(ta),gas:c},function(a){a?(Q("Your registration was cancelled - please try again","HEXRun Registration"),Pa=!1):$("#loadingDiv").removeClass("hide")}))})}function v(){U.methods.buyLevel(oa,new BigNumber(pa).times(100000000).toFixed()).estimateGas({from:V},function(b,c){return b?void Q("There was an error with your purchase - please check you have the correct amount of HEX in your wallet and try again","HEXRun Error",15e3):void(Q("HEXRun Level Purchase sent and will show up here shortly","HEXRun Level Upgrade"),ma=0,Pa=!1,Qa=!0,Ra=oa,Sa=0,setTimeout(function(){f()},2500),U.methods.buyLevel(oa,new BigNumber(pa).times(100000000).toFixed()).send({from:V,gasPrice:a(ta),gas:c},function(a){a?(Q("Your Level Purchase was cancelled - please try again","HEXRun Level Upgrade"),Qa=!1):$("#loadingDiv").removeClass("hide")}))})}function w(b){U.methods.buyLevel(b,new BigNumber(qa).times(100000000).toFixed()).estimateGas({from:V},function(c,d){return c?void Q("There was an error with your purchase - please check you have the correct amount of HEX in your wallet and try again","HEXRun Error",15e3):void(Q("HEXRun Level Purchase sent - when complete it will show up here","HEXRun Level Upgrade"),ma=0,Pa=!1,Qa=!0,Ra=b,Sa=na,console.log("CHECKING FOR:",Ra,Sa),setTimeout(function(){f()},2500),U.methods.buyLevel(b,new BigNumber(qa).times(100000000).toFixed()).send({from:V,gasPrice:a(ta),gas:d},function(a){a?(Qa=!1,Q("Your Level Purchase was cancelled - please try again","HEXRun Level Upgrade")):$("#loadingDiv").removeClass("hide")}))})}function x(){let b=(100000000*$("#registrationHexApprove").val()).toFixed(0),c=new BigNumber($("#registrationHexApprove").val()).times(100000000).toFixed();return console.log("_amount:",b,c),isNaN(b)?void Q("Invalid HEX approval amount","HEX Approval"):void T.methods.approve("0x19465ce34f3e41f1cbd29ba57e881fc65f067ee0",c).estimateGas({from:V},function(b,d){Q("HEX approval TX sent ~ when processed will update here to allow level Purchase!","HEX Approval",15e3),ma=0,Na=!0,setTimeout(function(){e()},2500),T.methods.approve("0x19465ce34f3e41f1cbd29ba57e881fc65f067ee0",c).send({from:V,gasPrice:a(ta),gas:d},function(a){a?(Q("Your approval was cancelled - please try again","HEX Approval"),Na=!1):$("#loadingDiv").removeClass("hide")})})}function y(){let b=(100000000*$("#buyHexApprove").val()).toFixed(0),c=new BigNumber($("#buyHexApprove").val()).times(100000000).toFixed();return console.log("BUY APPROVE: _amount:",b,c),isNaN(b)?void Q("Invalid HEX approval amount","HEX Approval"):void T.methods.approve("0x19465ce34f3e41f1cbd29ba57e881fc65f067ee0",c).estimateGas({from:V},function(b,d){Q("HEX Approval sent and will show up here shortly","HEX Approval"),ma=0,Oa=!0,setTimeout(function(){e()},2500),T.methods.approve("0x19465ce34f3e41f1cbd29ba57e881fc65f067ee0",c).send({from:V,gasPrice:a(ta),gas:d},function(a){a?(Q("Your approval was cancelled - please try again","HEX Approval"),Oa=!1):$("#loadingDiv").removeClass("hide")})})}function z(){let b=(100000000*$("#buyHexApprove2").val()).toFixed(0),c=new BigNumber($("#buyHexApprove2").val()).times(100000000).toFixed();return console.log("BUY APPROVE2: _amount:",b,c),isNaN(b)?void Q("Invalid HEX approval amount","HEX Approval"):void(Q("HEX Approval sent and will show up here shortly","HEX Approval"),ma=0,Oa=!0,setTimeout(function(){n()},2500),T.methods.approve("0x19465ce34f3e41f1cbd29ba57e881fc65f067ee0",c).estimateGas({from:V},function(b,d){T.methods.approve("0x19465ce34f3e41f1cbd29ba57e881fc65f067ee0",c).send({from:V,gasPrice:a(ta),gas:d},function(a){a?(Q("Your approval was cancelled - please try again","HEX Approval"),Oa=!1):$("#loadingDiv").removeClass("hide")})}))}function A(){new BigNumber(fa).gte(new BigNumber(2e3).times(100000000))?!ia&&($("#regCompleteBtn").removeClass("disabled"),$("#approveNotice").addClass("hide"),ia=!0):ia&&($("#regCompleteBtn").addClass("disabled"),$("#approveNotice").removeClass("hide"),ia=!1)}function B(){console.log("buyNextLvlHex:",pa,fa),new BigNumber(fa).gte(new BigNumber(pa).times(100000000))?!ja&&($("#buyCompleteBtn").removeClass("disabled"),$("#buyApproveNotice").addClass("hide"),ja=!0):ja&&($("#buyCompleteBtn").addClass("disabled"),$("#buyApproveNotice").removeClass("hide"),ja=!1),console.log("checkHEXBuyApprovalLimits:",new BigNumber(fa).gte(new BigNumber(pa).times(100000000)))}function C(){console.log("buyNextLvlHex2:",qa,fa),new BigNumber(fa).gte(new BigNumber(qa).times(100000000))?($("#buyCompleteBtn2").removeClass("disabled"),$("#buyApproveNotice2").addClass("hide"),ja=!0):!1}function D(a){S.eth.net.getNetworkType(function(b,c){b?"Error:"+b:1e12<c?"testrpc":c;!1,T=new S.eth.Contract(hexTokenAbi.abi,"0x2b591e99afE9f32eAA6214f7B7629768c40Eeb39"),U=new S.eth.Contract(hexrunAbi.abi,"0x19465ce34f3e41f1cbd29ba57e881fc65f067ee0"),a&&a()})}function E(a){S.eth.getCoinbase((c,d)=>{var e="";c?(e="Error",ha=!1):(e=d,V=e,b(),e?(userWalletAddressShort=e.substring(0,10)+"...",a&&a()):ha=!1)})}function F(a,b){U.methods.users(a).call(function(a,c){a?b(a,null):b(null,c)})}function G(){console.log("UPDATING USER COUNTS:"),ca=0,U.methods.currUserID().call(function(a,b){aa=parseInt(b),ca=aa-1,$("#totalUsersDisp").html(ca),U.methods.viewLevelStats().call(function(a,b){console.log("STATS:",a,b);for(let d=0;d<b.length;d++)ba[d]=parseInt(b[d])-1,$("#usersActiveLvl"+(+d+1).toString()).html(ba[d]);U.methods.totalHex().call(function(a,b){if(!a){$("#gameTotalHex").html(new BigNumber(b).div(100000000).toFixed(2)+" HEX");let a=new BigNumber(b).div(100000000).times(Ba);$("#totalETH").html(a.toFixed(3));let c=a.div(new BigNumber(Ca));$("#totalBTC").html(c.toFixed(3)),$("#totalBTCUSD").html(c.times(Da).toFixed(2))}}),setTimeout(function(){G()},15e3)})})}function H(){U.methods.currUserID().call(function(a,b){aa=parseInt(b),isNaN(W)?(da=!0,L(160)):U.methods.userList(W).call(function(a,b){a||(b.toUpperCase()==V.toUpperCase()?(console.log("Invalid referer - can't use your own account"),Q("Invalid referer - can't use your own account. Selecting free referer for you now...","Referal Address",1e4),da=!0):(X=b,Y?($("#refBy").html(X.substring(0,10)),$("#refBy2").html(X.substring(0,10)),$("#dashboardRef").html(X.substring(0,10)),$("#dashboardRef2").html(X.substring(0,10))):($("#refBy").html(X),$("#refBy2").html(X),$("#dashboardRef").html(X),$("#dashboardRef2").html(X))),da&&(console.log("FINDING REF"),da=!0,L(0)))})})}function I(a,b,c){U.methods.viewUserReferral(a).call(function(d,e){console.log("MATRIX:",a,e,c);let f=2;3==b&&(f=4),4==b&&(f=8),5==b&&(f=16),6==b&&(f=32);for(let a=0;a<e.length;a++)J(e,b,+a,f,+(c+a+1))})}function J(a,b,c,d,e){let f=a[c];U.methods.users(f).call(function(a,g){console.log("BUILD MATRIX REX:",f,b,c,d,e),console.log("#depthID_"+b+"_"+ +e+"=",g.id,c),$("#depthID_"+b+"_"+ +e).html("ID:"+g.id),K(f,b+"_"+ +e,1,0),6>+b&&(2==b&&(0<c?e=2:e=0),3==b&&(e=+(2*e-2)),4==b&&(e=+(2*e-2)),5==b&&(e=+(2*e-2)),6==b&&(e=16*+e),console.log("START NEXT BUILDMATRIX:",f,+(b+1),+e),I(f,+(b+1),+e))})}function K(a,b,c,d){U.methods.viewUserLevelExpired(a,c).call(function(e,f){parseInt(f)>new Date().getTime()/1e3&&(d=c,$("#depthLvl_"+b).html("Lvl:"+d),$("#depthPanel_"+b).removeClass("depthInactive")),10>+(c+1)&&K(a,b,+(c+1),d)})}function L(a){U.methods.userList(a).call(function(b,c){let d=c;U.methods.viewUserLevelExpired(d,1).call(function(b,c){console.log("FINDING REF",c,a),c>=new Date().getTime()/1e3?U.methods.viewUserReferral(d).call(function(b,c){b?a+1<aa?L(a+1):N():1>c.length?(console.log("FOUND VALID REF:",d),W=a,X=d,Cookies.set("id",W,{expires:60}),Y?($("#refBy").html(X.substring(0,20)),$("#refBy2").html(X.substring(0,20))):($("#refBy").html(X),$("#refBy2").html(X))):a+1<aa?L(a+1):N()}):a+1<aa?L(a+1):N()})})}function M(a){U.methods.userList(a).call(function(b,c){let d=c;U.methods.viewUserLevelExpired(d,1).call(function(b,c){$("#scanDetail").html("ID: "+a+" Addr:"+d),c>=new Date().getTime()/1e3?xa.methods.viewUserReferral(d).call(function(b,c){b?a+1<aa&&M(a+1):1>c.length?(console.log("SCAN FOUND VALID REF:",d),$("#scanTitle").html("Found:"),W=a,X=d):a+1<aa&&M(a+1)}):a+1<aa&&M(a+1)})})}function N(){W=1,U.methods.userList(W).call(function(a,b){X=b,Y?($("#refBy").html(X.substring(0,20)),$("#refBy2").html(X.substring(0,20))):($("#refBy").html(X),$("#refBy2").html(X))})}function O(){P("Unable to open your Ethereum Wallet, you need to have a Web3 wallet such as MetaMask installed and unlocked/logged in.<br/><br/>If this issue continues please contact support.")}function P(a){$("#errorMsg").html(a),$("#errorPanel").foundation("open")}function Q(a,b,c){$.toast({text:a,heading:b||"HEXRun",showHideTransition:"fade",allowToastClose:!0,hideAfter:c||3e3,stack:5,position:"bottom-right",bgColor:"#ff3cbe",textColor:"#eeeeee",textAlign:"left",loader:!0,loaderBg:"#9EC600",beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){}})}function R(a){return function(){document.execCommand("copy",!1,a.select()),Q("Link copied to your clipboard","Referral Link")}}var S,T,U,V,W,X,Y=!1,Z=!1,_=!1,aa=0,ba=[],ca=0,da=!1,ea=0,fa=0,ga=!1,ha=!0,ia=!1,ja=!1,ka=1,la=!1,ma=0,na=0,oa=2,pa=4e3,qa=4e3,ra=2,sa={lvl1:0,lvl2:0,lvl3:0,lvl4:0,lvl5:0,lvl6:0,lvl7:0,lvl8:0,lvl9:0,lvl10:0},ta=350,ua=window.matchMedia("only screen and (pointer:coarse)");ua.matches&&(Y=!0);var va,wa,xa,ya=()=>{const{ethereum:a}=window;return!!(a&&a.isMetaMask)};$(document).foundation();var za=function(a){var b,c,d=decodeURIComponent(window.location.search.substring(1)),e=d.split("&");for(c=0;c<e.length;c++)if(b=e[c].split("="),b[0]===a)return void 0===b[1]||b[1]}("id")||"";if(0<za.length)W=za;else{var Aa=Cookies.get("id")||"";0<Aa.length&&(W=Aa)}Cookies.set("id",W,{expires:60}),console.log("REF:",W),Z=ya(),Z?_=!0:window.web3&&(ethereum=window.web3,_=!0),console.log("hasWeb3Wallet:",_),console.log("isMetaMaskInstalled:",ya()),_&&(async()=>{try{if(ethereum.enable)try{await ethereum.enable(),window.ethereum.on("accountsChanged",function(){location.reload()}),ga=!0,d()}catch(a){d()}else window.web3?(ga=!0,d()):d()}catch(a){console.error(a)}})();var Ba=0,Ca=0,Da=0,Ea=[],Fa=0,Ga=0,Ha=0,Ia=[0,0,0,0,0,0,0,0,0,0],Ja=[0,0,0,0,0,0,0,0,0,0],Ka=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],La=[0,0,0,0,0,0,0,0,0,0,0],Ma=!1,Na=!1,Oa=!1,Pa=!1,Qa=!1,Ra=1,Sa=0});